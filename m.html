<!doctype html>
<html lang="fa" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Warp On Hiddify Next</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <link rel="icon" type="image/jpeg" href="https://github.com/user-attachments/assets/3ec2a5a4-2bec-4af5-a976-e45f985dd63e" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Ibarra+Real+Nova:wght@400..700&family=Inter:opsz,wght@14..32,100..900&family=Source+Code+Pro:wght@200..900&family=Vazirmatn:wght@100..900&display=swap" rel="stylesheet">
        <style>
            body {
                --bg-color: #f0f2f5;
                --text-primary: #1c1e21;
                --text-secondary: #65676b;
                --header-color: #000000;
                --container-bg: #ffffff;
                --card-panel-bg: #e9ecef;
                --input-border: #ced4da;
                --input-focus-border: #80bdff;
                --btn-color-ipv4: #b41e9d;
                --btn-hover-color-ipv4: #cc0e4e;
                --btn-color-ipv6: #1b5a99;
                --btn-hover-color-ipv6: #4da0ff;
                --label-color-ipv4: #c90065;
                --label-color-ipv6: #2b1dfc;
                --h2-color-ipv4: #0363ff;
                --h2-color-ipv6: #ff00b7;
                --card-h5-ipv4: #185693;
                --card-h5-ipv6: #a30d8e;
                --icon-color: #4b4f56;
                --neon-cyan: #008b8b;
                --neon-magenta: #be0461;
                --fab-icon-color-light: #000000;
                --fab-icon-color-dark: #ffffff;
                --popup-overlay-bg: rgba(0, 0, 0, 0.5);
                --links-popup-bg: #ffffff;
                --links-popup-text: #1c1e21;
                --links-popup-border: #cccccc;
                --links-popup-shadow: rgba(0, 0, 0, 0.15);
                --links-popup-link-hover-bg: #f0f0f0;
                --links-popup-title-color: #333;
                --wow-toggle-off-color: #d13636;
                --wow-toggle-off-border-color: #b7093f;
                --neon-notif: #3b393a;
                --fab-ali-border-color-light: #7e57c2;
                --fab-ali-before-bg-light: #ede7f6;
                --fab-ali-after-bg-light: #d1c4e9;
                --fab-ali-icon-hover-color-light: #4527a0;
                --fab-ali-initial-icon-color-light: #FFFFFF;
                --fab-ali-border-color-dark: #03045e;
                --fab-ali-before-bg-dark: #240046;
                --fab-ali-after-bg-dark: #5a189a;
                --fab-ali-icon-hover-color-dark: #e0aaff;
                --fab-ali-initial-icon-color-dark: #FFFFFF;
                --font-serif: "Ibarra Real Nova", "Times New Roman", Georgia, ui-serif, serif;
                --font-sans-serif: "Vazirmatn", "Inter", -apple-system, BlinkMacSystemFont, Tahoma, Arial, sans-serif;
                --font-mono: "SFMono-Regular", "Source code pro", monospace;
            }

            body.dark-theme {
                --bg-color: #252535;
                --text-primary: #cbd7f5;
                --text-secondary: #cac9cb;
                --header-color: #ffffff;
                --container-bg: #3a3b3c;
                --card-panel-bg: #404040;
                --input-border: #4d4d4d;
                --input-focus-border: #1976d2;
                --icon-color: #e4e6eb;
                --neon-cyan: #00ffff;
                --neon-magenta: #fd007e;
                --popup-overlay-bg: rgba(0, 0, 0, 0.75);
                --links-popup-bg: #404040;
                --links-popup-text: #c1d0f5;
                --links-popup-border: #555555;
                --links-popup-shadow: rgba(0, 0, 0, 0.3);
                --links-popup-link-hover-bg: #4f4f4f;
                --links-popup-title-color: #05e2b8;
                --wow-toggle-off-color: #d5180b;
                --wow-toggle-off-border-color: #da0535;
                --neon-notif: #3e3e3e;
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: var(--font-sans-serif);
                font-size: 16px;
                font-weight: 500;
                background-color: var(--bg-color);
                color: var(--text-primary);
                display: flex;
                justify-content: flex-start;
                align-items: center;
                min-height: 100vh;
                flex-direction: column;
                padding: 20px;
                padding-bottom: 80px;
                transition:
                  background-color 0.3s,
                  color 0.3s;
                position: relative;
            }

            button,
            a,
            input[type="button"],
            input[type="submit"],
            input[type="checkbox"],
            input[type="radio"],
            select,
            .switcher-btn,
            .copy-btn,
            .uiverse-fab-button,
            .neo-toggle,
            .cyber-checkbox,
            .theme-switch__container,
            .popup-close-btn {
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }

            a {
                text-decoration: none;
                color: inherit;
            }
            
            .top-container {
                width: 100%;
                max-width: 500px;
                text-align: center;
                margin-bottom: 20px;
            }
            .content-section {
                width: 100%;
                max-width: 500px;
                text-align: center;
            }
            .container {
                background-color: var(--container-bg);
                padding: 24px;
                border-radius: 12px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                width: 100%;
                max-width: 400px;
                margin: 0 auto;
                transition: background-color 0.3s;
            }

            h1 {
                font-size: 2em;
                font-weight: 700;
                background: linear-gradient(
                    90deg,
                    var(--neon-magenta),
                    var(--neon-cyan),
                    var(--h2-color-ipv4),
                    var(--neon-magenta)
                );
                background-size: 250% auto;
                color: var(--header-color);
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                animation: animate-gradient 8s linear infinite;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
                margin-bottom: 0.5em;
            }
            @keyframes animate-gradient {
                to {
                    background-position: 250% center;
                }
            }

            .form-control {
                width: 100%;
                padding: 12px;
                border: 1px solid var(--input-border);
                background-color: var(--bg-color);
                color: var(--text-primary);
                border-radius: 5px;
                outline: none;
                box-sizing: border-box;
            }
            .form-control:focus {
                border-color: var(--input-focus-border);
            }
            .input-field {
                margin-bottom: 24px;
                text-align: right;
            }
            .input-field label {
                font-size: 14px;
                display: block;
                margin-bottom: 4px;
                color: var(--text-secondary);
            }
            .btn {
                color: #fff;
                padding: 12px 24px;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                width: 100%;
            }
            .btn i {
                margin-right: 8px;
            }
            .dual-input-container {
                display: flex;
                gap: 10px;
            }
            .dual-input-container .input-wrapper {
                flex: 1;
                min-width: 0;
            }
            .card-panel {
                margin-top: 24px;
                padding: 16px;
                border-radius: 12px;
                background-color: var(--card-panel-bg);
                display: none;
            }
            .qr-code-container {
                display: flex;
                justify-content: center;
                align-items: center;
                margin-bottom: 24px;
                height: 200px;
            }
            .qr-code-container canvas {
                border-radius: 8px;
            }
            .logo-link {
                display: block;
                position: absolute;
                top: 15px;
                left: 15px;
                z-index: 10;
            }
            .logo-img {
                max-width: 60px;
                height: auto;
                border-radius: 10px;
            }
            .stylish-switcher {
                position: relative;
                display: inline-flex;
                background-color: var(--card-panel-bg);
                border-radius: 99px;
                padding: 5px;
                margin-top: 15px;
                user-select: none;
            }
            .switcher-background {
                position: absolute;
                top: 5px;
                left: 5px;
                height: calc(100% - 10px);
                border-radius: 99px;
                transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
                z-index: 0;
            }
            .switcher-btn {
                border: none;
                background: transparent;
                font-size: 1em;
                padding: 8px 24px;
                cursor: pointer;
                position: relative;
                z-index: 1;
                transition: color 0.3s ease;
            }
            .advanced-options-container {
                display: flex;
                justify-content: flex-start;
                align-items: center;
                flex-wrap: nowrap;
                gap: 10px;
            }
            .wow-container {
                display: flex;
                align-items: center;
                gap: 10px;
                order: 2;
            }

            #darkness-name {               
                margin-top: auto; 
                padding-top: 20px;
                width: 100%;
                text-align: center;
                font-size: 0.8em;
            }
            #darkness-name a {
                color: var(--text-secondary);
                text-decoration: none;
            }
            #darkness-name a:hover {
                text-decoration: underline;
            }
            #ipv4-content h2 {
                color: var(--h2-color-ipv4);
            }
            #ipv4-content .btn:not(.btn-effect-two) {
                background-color: var(--btn-color-ipv4);
            }
             #ipv4-content .btn:not(.btn-effect-two):hover {
                background-color: var(--btn-hover-color-ipv4);
            }
            #ipv6-content h2 {
                color: var(--h2-color-ipv6);
            }
            #ipv6-content .btn:not(.btn-effect-two) {
                background-color: var(--btn-color-ipv6);
            }
            #ipv6-content .btn:not(.btn-effect-two):hover {
                background-color: var(--btn-hover-color-ipv6);
            }
            .hidden {
                display: none;
            }
            .select-container,
            .ip-port-container {
                display: flex;
                gap: 10px;
            }
            .select-item,
            .ip-port-item {
                flex: 1;
            }

            .galahhad-theme-toggle-wrapper {
                position: fixed;
                top: 10px;
                right: 10px;
                z-index: 1000;
            }

            .theme-switch {
                --toggle-size: 15px;
                --container-width: 5.625em;
                --container-height: 2.5em;
                --container-radius: 6.25em;
                --container-light-bg: #3d7eae;
                --container-night-bg: #1d1f2c;
                --circle-container-diameter: 3.375em;
                --sun-moon-diameter: 2.125em;
                --sun-bg: #ecca2f;
                --moon-bg: #c4c9d1;
                --spot-color: #959db1;
                --circle-container-offset: calc((var(--circle-container-diameter) - var(--container-height)) / 2 * -1);
                --stars-color: #fff;
                --clouds-color: #f3fdff;
                --back-clouds-color: #aacadf;
                --transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
                --circle-transition: 0.3s cubic-bezier(0, -0.02, 0.35, 1.17);
            }

            .theme-switch,
            .theme-switch *,
            .theme-switch *::before,
            .theme-switch *::after {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
                font-size: var(--toggle-size);
            }

            .theme-switch__container {
                width: var(--container-width);
                height: var(--container-height);
                background-color: var(--container-light-bg);
                border-radius: var(--container-radius);
                overflow: hidden;
                cursor: pointer;
                box-shadow:
                    0em -0.062em 0.062em rgba(0, 0, 0, 0.25),
                    0em 0.062em 0.125em rgba(255, 255, 255, 0.94);
                transition: var(--transition);
                position: relative;
            }

            .theme-switch__container::before {
                content: "";
                position: absolute;
                z-index: 1;
                inset: 0;
                box-shadow:
                    0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset,
                    0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset;
                border-radius: var(--container-radius);
            }

            .theme-switch__checkbox {
                display: none;
            }

            .theme-switch__circle-container {
                width: var(--circle-container-diameter);
                height: var(--circle-container-diameter);
                background-color: rgba(255, 255, 255, 0.1);
                position: absolute;
                left: var(--circle-container-offset);
                top: var(--circle-container-offset);
                border-radius: var(--container-radius);
                box-shadow:
                    inset 0 0 0 3.375em rgba(255, 255, 255, 0.1),
                    inset 0 0 0 3.375em rgba(255, 255, 255, 0.1),
                    0 0 0 0.625em rgba(255, 255, 255, 0.1),
                    0 0 0 1.25em rgba(255, 255, 255, 0.1);
                display: flex;
                transition: var(--circle-transition);
                pointer-events: none;
            }

            .theme-switch__sun-moon-container {
                pointer-events: auto;
                position: relative;
                z-index: 2;
                width: var(--sun-moon-diameter);
                height: var(--sun-moon-diameter);
                margin: auto;
                border-radius: var(--container-radius);
                background-color: var(--sun-bg);
                box-shadow:
                    0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset,
                    0em -0.062em 0.062em 0em #a1872a inset;
                filter: drop-shadow(0.062em 0.125em 0.125em rgba(0, 0, 0, 0.25))
                    drop-shadow(0em 0.062em 0.125em rgba(0, 0, 0, 0.25));
                overflow: hidden;
                transition: var(--transition);
            }

            .theme-switch__moon {
                transform: translateX(100%);
                width: 100%;
                height: 100%;
                background-color: var(--moon-bg);
                border-radius: inherit;
                box-shadow:
                    0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset,
                    0em -0.062em 0.062em 0em #969696 inset;
                transition: var(--transition);
                position: relative;
            }

            .theme-switch__spot {
                position: absolute;
                top: 0.75em;
                left: 0.312em;
                width: 0.75em;
                height: 0.75em;
                border-radius: var(--container-radius);
                background-color: var(--spot-color);
                box-shadow: 0em 0.0312em 0.062em rgba(0, 0, 0, 0.25) inset;
            }

            .theme-switch__spot:nth-of-type(2) {
                width: 0.375em;
                height: 0.375em;
                top: 0.937em;
                left: 1.375em;
            }

            .theme-switch__spot:nth-last-of-type(3) {
                width: 0.25em;
                height: 0.25em;
                top: 0.312em;
                left: 0.812em;
            }

            .theme-switch__clouds {
                width: 1.25em;
                height: 1.25em;
                background-color: var(--clouds-color);
                border-radius: var(--container-radius);
                position: absolute;
                bottom: -0.625em;
                left: 0.312em;
                box-shadow:
                    0.937em 0.312em var(--clouds-color),
                    -0.312em -0.312em var(--back-clouds-color),
                    1.437em 0.375em var(--clouds-color),
                    0.5em -0.125em var(--back-clouds-color),
                    2.187em 0 var(--clouds-color),
                    1.25em -0.062em var(--back-clouds-color),
                    2.937em 0.312em var(--clouds-color),
                    2em -0.312em var(--back-clouds-color),
                    3.625em -0.062em var(--clouds-color),
                    2.625em 0em var(--back-clouds-color),
                    4.5em -0.312em var(--clouds-color),
                    3.375em -0.437em var(--back-clouds-color),
                    4.625em -1.75em 0 0.437em var(--clouds-color),
                    4em -0.625em var(--back-clouds-color),
                    4.125em -2.125em 0 0.437em var(--back-clouds-color);
                transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
            }

            .theme-switch__stars-container {
                position: absolute;
                color: var(--stars-color);
                top: -100%;
                left: 0.312em;
                width: 2.75em;
                height: auto;
                transition: var(--transition);
            }

            .theme-switch__checkbox:checked ~ .theme-switch__container {
                background-color: var(--container-night-bg);
            }

            .theme-switch__checkbox:checked ~ .theme-switch__container .theme-switch__circle-container {
                left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter));
            }

            .theme-switch__checkbox:checked ~ .theme-switch__container .theme-switch__circle-container:hover {
                left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter) - 0.187em);
            }

            .theme-switch__circle-container:hover {
                left: calc(var(--circle-container-offset) + 0.187em);
            }

            .theme-switch__checkbox:checked ~ .theme-switch__container .theme-switch__moon {
                transform: translate(0);
            }

            .theme-switch__checkbox:checked ~ .theme-switch__container .theme-switch__clouds {
                bottom: -4.062em;
            }

            .theme-switch__checkbox:checked ~ .theme-switch__container .theme-switch__stars-container {
                top: 50%;
                transform: translateY(-50%);
            }

            .uiverse-fab-button {
                display: flex;
                justify-content: center;
                align-items: center;
                width: 3.5rem; 
                height: 3.5rem; 
                overflow: hidden; 
                background-size: 300% 300%;
                cursor: pointer;
                backdrop-filter: blur(1rem);
                border-radius: 50%; 
                transition: 0.5s; 
                animation: gradient_301 5s ease infinite;
                position: fixed; 
                padding: 0;
            }

            .uiverse-fab-button .uiverse-container-stars {
                position: absolute;
                z-index: -2; 
                width: 100%;
                height: 100%;
                overflow: hidden;
                transition: 0.5s;
                backdrop-filter: blur(1rem);
                border-radius: 50%;
            }

            .uiverse-fab-button .uiverse-fab-content {
                z-index: 2; 
                display: flex;
                justify-content: center;
                align-items: center;
                width: 100%;
                height: 100%;
            }

            .uiverse-fab-button .material-icons,
            .uiverse-fab-button img {
                text-shadow: 0 0 4px white; 
                z-index: 2; 
                transition: color 0.3s ease-in; 
            }
            .uiverse-fab-button .material-icons {
                font-size: 24px;
            }
            .uiverse-fab-button img {
                width: 60%;
                height: 60%;
                object-fit: contain;
            }

            .uiverse-fab-button .uiverse-glow {
                position: absolute;
                display: flex;
                width: 100%;
                height: 100%;
                z-index: 0; 
            }

            .uiverse-fab-button .circle {
                width: 100%;
                height: 100%;
                filter: blur(1.5rem);
                animation: pulse_3011 4s infinite;
                z-index: -1; 
                border-radius: 50%;
            }

            .uiverse-fab-button .circle:nth-of-type(1) {
                background: rgba(254, 83, 186, 0.636);
            }

            .uiverse-fab-button .circle:nth-of-type(2) {
                background: rgba(142, 81, 234, 0.704);
            }

            .uiverse-fab-button:hover {
                transform: scale(1.1); 
            }

            .uiverse-fab-button:active {
                animation: none;
            }

            .uiverse-fab-button:active .circle {
                background: #fe53bb;
            }

            .uiverse-fab-button .uiverse-stars {
                position: relative;
                background: transparent;
                width: 200rem;
                height: 200rem;
            }

            .uiverse-fab-button .uiverse-stars::after {
                content: "";
                position: absolute;
                top: -10rem;
                left: -100rem;
                width: 100%;
                height: 100%;
                animation: animStarRotate 90s linear infinite;
                background-image: radial-gradient(#ffffff 1px, transparent 1%);
                background-size: 50px 50px;
            }

            .uiverse-fab-button .uiverse-stars::before {
                content: "";
                position: absolute;
                top: 0;
                left: -50%;
                width: 170%;
                height: 500%;
                animation: animStar 60s linear infinite;
                background-image: radial-gradient(#ffffff 1px, transparent 1%);
                background-size: 50px 50px;
                opacity: 0.5;
            }

            @keyframes animStar { 
                from { transform: translateY(0); }
                to { transform: translateY(-135rem); } 
            }
            @keyframes animStarRotate { 
                from { transform: rotate(360deg); } 
                to { transform: rotate(0); } 
            }
                
            @keyframes gradient_301 {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
            }
            @keyframes pulse_3011 {
                0% { transform: scale(0.75); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.7); }
                70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(0, 0, 0, 0); }
                100% { transform: scale(0.75); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); }
            }

            .guide-btn {
                bottom: 20px;
                left: 20px;
                z-index: 1002;
            }
            .links-fab {
                bottom: 20px;
                right: 20px;
                z-index: 1003;
            }
            
            .uiverse-fab-button.fab-ali-tahmazi-effect {
                border: 1px solid var(--fab-ali-border-color-dark); 
                transition: all 0.5s ease-in, transform 0.5s; 
                background-image: none; 
                background-color: #212121; 
            }

            .uiverse-fab-button.fab-ali-tahmazi-effect::before,
            .uiverse-fab-button.fab-ali-tahmazi-effect::after {
              content: '';
              position: absolute;
              top: 0;
              width: 0;
              height: 100%;
              transform: skew(15deg);
              transition: all 0.5s;
              overflow: hidden;
              z-index: 1; 
            }

            .uiverse-fab-button.fab-ali-tahmazi-effect::before {
              left: -10px; 
              background: var(--fab-ali-before-bg-dark); 
            }

            .uiverse-fab-button.fab-ali-tahmazi-effect::after {
              right: -10px; 
              background: var(--fab-ali-after-bg-dark); 
            }

            .uiverse-fab-button.fab-ali-tahmazi-effect:hover::before,
            .uiverse-fab-button.fab-ali-tahmazi-effect:hover::after {
              width: 58%; 
            }
            
            .uiverse-fab-button.fab-ali-tahmazi-effect .uiverse-fab-content .material-icons,
            .uiverse-fab-button.fab-ali-tahmazi-effect .uiverse-fab-content img {
              color: var(--fab-ali-initial-icon-color-dark); 
              transition: color 0.3s ease-in;
            }

            .uiverse-fab-button.fab-ali-tahmazi-effect:hover .uiverse-fab-content .material-icons,
            .uiverse-fab-button.fab-ali-tahmazi-effect:hover .uiverse-fab-content img {
                color: var(--fab-ali-icon-hover-color-dark);
            }

            body.light-theme .uiverse-fab-button.fab-ali-tahmazi-effect { border-color: var(--fab-ali-border-color-light); background-color: #f0f0f0;  }
            body.light-theme .uiverse-fab-button.fab-ali-tahmazi-effect::before { background: var(--fab-ali-before-bg-light); }
            body.light-theme .uiverse-fab-button.fab-ali-tahmazi-effect::after { background: var(--fab-ali-after-bg-light); }
            body.light-theme .uiverse-fab-button.fab-ali-tahmazi-effect .uiverse-fab-content .material-icons,
            body.light-theme .uiverse-fab-button.fab-ali-tahmazi-effect .uiverse-fab-content img { color: var(--fab-ali-initial-icon-color-light); }
            body.light-theme .uiverse-fab-button.fab-ali-tahmazi-effect:hover .uiverse-fab-content .material-icons,
            body.light-theme .uiverse-fab-button.fab-ali-tahmazi-effect:hover .uiverse-fab-content img { color: var(--fab-ali-icon-hover-color-light); }

            .links-popup {
                position: fixed;
                bottom: calc(3.5rem + 30px);
                right: 20px;
                width: 350px;
                background-color: var(--links-popup-bg);
                border: 1px solid var(--links-popup-border);
                border-radius: 10px;
                box-shadow: 0 4px 12px var(--links-popup-shadow);
                z-index: 1005;
                padding: 15px;
                display: none;
                flex-direction: column;
                gap: 12px;
                color: var(--links-popup-text);
            }
            .links-popup .popup-section-title {
                margin: 0 0 8px 0;
                font-size: 1em;
                border-bottom: 1px solid var(--links-popup-border);
                padding-bottom: 8px;
                display: flex;
                align-items: center;
                color: var(--links-popup-title-color);
            }
            .links-popup .popup-section-title i {
                vertical-align: middle;
                font-size: 1.1em;
                margin-left: 5px;
            }
            .links-popup .link-item-container {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            .links-popup .link-item-title {
                font-size: 0.9em;
                color: var(--text-secondary);
                padding-right: 5px;
            }
            .links-popup .link-item,
            .links-popup .download-item {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 8px;
                border-radius: 6px;
                transition: background-color 0.2s;
            }
            .links-popup .link-item:hover,
            .links-popup .download-item:hover {
                background-color: var(--links-popup-link-hover-bg);
            }
            .links-popup .link-text {
                flex-grow: 1;
                font-size: 0.75em; 
                white-space: normal;
                overflow-wrap: break-word;
                word-break: break-all;
                margin-left: 8px;
                direction: ltr;
                text-align: left;
                line-height: 1.4;
            }
            .links-popup .copy-btn {
                cursor: pointer;
                font-size: 18px;
                color: var(--icon-color);
                margin-right: 5px;
                flex-shrink: 0;
            }
            .links-popup .download-link {
                display: flex;
                align-items: center;
                text-decoration: none;
                color: var(--links-popup-text);
                font-size: 0.9em;
                flex-grow: 1;
            }
            .links-popup .download-link i {
                font-size: 20px;
                margin-left: 8px;
            }
            .links-popup .download-item span {
                font-size: 0.9em;
                margin-right: auto;
                padding-left: 10px;
            }

            .popup-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: var(--popup-overlay-bg);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 2000;
                padding: 20px;
            }
            .popup-container {
                width: 100%;
                max-width: 900px;
                height: 90vh;
                border-radius: 12px;
                display: flex;
                flex-direction: column;
                overflow: hidden;
                background-color: #23272f;
            }
            .popup-header {
                padding: 10px 20px;
                display: flex;
                justify-content: flex-end;
                align-items: center;
                background: #1a1d24;
                border-bottom: 1px solid #3a3f4b;
            }
            .popup-close-btn {
                background: #c71585;
                color: white;
                border: none;
                border-radius: 50%;
                width: 30px;
                height: 30px;
                cursor: pointer;
                font-size: 20px;
                line-height: 1;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .popup-content {
                overflow-y: auto;
                flex-grow: 1;
                background-color: #1a1d24;
            }

            #guide-popup .popup-content-wrapper {
                --bg-color: #1a1d24;
                --surface-color: #23272f;
                --text-color: #c5c8c6;
                --heading-main-color: #61dafb;
                --heading-sub-color: #a55aff;
                --link-color: #61dafb;
                --link-hover-color: #82e9ff;
                --border-color: #3a3f4b;
                --accent-color: #61dafb;
                --code-bg-color: #1e2229;
                --code-text-color: #ff79c6;
                --pre-bg-color: #16181d;
                --pre-text-color: var(--text-color);
                --blockquote-border-color: var(--accent-color);
                --blockquote-bg-color: #20232a;
                --table-row-even-bg: #2a2e37;
                --table-header-bg: #2f343e;
                --table-text-font-size: 0.9em;
                --table-cell-padding: 8px 10px;
                
                line-height: 1.8;
                background-color: var(--bg-color);
                color: var(--text-color);
                font-size: 16px;
            }
            #guide-popup .popup-content-wrapper *,
            #guide-popup .popup-content-wrapper *::before,
            #guide-popup .popup-content-wrapper *::after {
                box-sizing: border-box;
            }
            #guide-popup .popup-content-wrapper .container {
                max-width: 900px;
                margin: 0 auto;
                padding: 25px;
            }
            #guide-popup .popup-content-wrapper article {
                background-color: var(--surface-color);
                padding: 30px 40px;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
                margin-top: 20px;
            }
            #guide-popup .popup-content-wrapper article > header {
                margin-bottom: 35px;
                padding-bottom: 25px;
                border-bottom: 2px solid var(--accent-color);
            }
            #guide-popup .popup-content-wrapper h1 {
                font-size: 2.6em;
                color: var(--heading-main-color) !important;
                font-weight: 700;
                margin: 0;
                line-height: 1.3;
                background: none;
                -webkit-text-fill-color: initial;
            }
            #guide-popup .popup-content-wrapper h2 {
                font-size: 2em;
                color: var(--heading-sub-color);
                font-weight: 600;
                margin-top: 50px;
                margin-bottom: 25px;
                padding-bottom: 12px;
                border-bottom: 1px solid var(--border-color);
            }
            #guide-popup .popup-content-wrapper h3 {
                font-size: 1.6em;
                color: var(--heading-sub-color);
                font-weight: 600;
                margin-top: 40px;
                margin-bottom: 20px;
            }
            #guide-popup .popup-content-wrapper p {
                margin-bottom: 20px;
                text-align: justify;
            }
            #guide-popup .popup-content-wrapper ul,
            #guide-popup .popup-content-wrapper ol {
                margin-bottom: 20px;
                padding-right: 30px;
            }
            #guide-popup .popup-content-wrapper li {
                margin-bottom: 10px;
            }
            #guide-popup .popup-content-wrapper a {
                color: var(--link-color);
                text-decoration: none;
            }
            #guide-popup .popup-content-wrapper a:hover,
            #guide-popup .popup-content-wrapper a:focus {
                text-decoration: underline;
                color: var(--link-hover-color);
                outline: none;
            }
            #guide-popup .popup-content-wrapper table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 30px;
                box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
                overflow-x: auto;
                display: block;
                font-size: var(--table-text-font-size);
            }
            #guide-popup .popup-content-wrapper th,
            #guide-popup .popup-content-wrapper td {
                border: 1px solid var(--border-color);
                padding: var(--table-cell-padding);
                text-align: right;
            }
            #guide-popup .popup-content-wrapper th {
                background-color: var(--table-header-bg);
                font-weight: 700;
                color: var(--heading-sub-color);
            }
            #guide-popup .popup-content-wrapper tr:nth-child(even) td {
                background-color: var(--table-row-even-bg);
            }
            #guide-popup .popup-content-wrapper tr:hover td {
                background-color: #363b45;
            }
            #guide-popup .popup-content-wrapper pre {
                background-color: var(--pre-bg-color);
                color: var(--pre-text-color);
                padding: 20px;
                border-radius: 8px;
                overflow-x: auto;
                margin-bottom: 30px;
                font-size: 0.95em;
                line-height: 1.6;
                box-shadow: inset 0 1px 4px rgba(0,0,0,0.2);
                border: 1px solid var(--border-color);
                direction: ltr; 
                text-align: left;
            }
            #guide-popup .popup-content-wrapper code {
                font-family: var(--font-mono);
            }
            #guide-popup .popup-content-wrapper p code,
            #guide-popup .popup-content-wrapper li code,
            #guide-popup .popup-content-wrapper td code,
            #guide-popup .popup-content-wrapper th code {
                background-color: var(--code-bg-color);
                padding: 4px 8px;
                border-radius: 5px;
                color: var(--code-text-color);
                font-size: 0.9em;
            }
            #guide-popup .popup-content-wrapper blockquote {
                border-right: 5px solid var(--blockquote-border-color);
                border-left: none; 
                padding: 18px 25px;
                margin: 30px 0;
                color: var(--text-color);
                background-color: var(--blockquote-bg-color);
                border-radius: 0 8px 8px 0;
            }
            #guide-popup .popup-content-wrapper blockquote p {
                margin-bottom: 0;
            }

            @media (max-width: 992px) { /* For #guide-popup content */ }
            @media (max-width: 768px) { 
                #guide-popup .popup-content-wrapper article { padding: 20px; }
                #guide-popup .popup-content-wrapper h1 { font-size: 2em; }
                #guide-popup .popup-content-wrapper h2 { font-size: 1.6em; }
                #guide-popup .popup-content-wrapper h3 { font-size: 1.3em; }
            }
            @media (max-width: 480px) {
                #guide-popup .popup-content-wrapper article { padding: 15px; }
                #guide-popup .popup-content-wrapper h1 { font-size: 1.8em; }
                #guide-popup .popup-content-wrapper h2 { font-size: 1.4em; }
                #guide-popup .popup-content-wrapper h3 { font-size: 1.2em; }
                #guide-popup .popup-content-wrapper pre { padding: 10px; font-size: 0.85em;}
                #guide-popup .popup-content-wrapper p code,
                #guide-popup .popup-content-wrapper li code { font-size: 0.8em; padding: 2px 4px;}
            }

            .toast-notification {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background-color: var(--neon-notif);
                color: white;
                padding: 10px 20px;
                border-radius: 8px;
                z-index: 3000;
                font-size: 0.9em;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
                opacity: 0;
                transition:
                    opacity 0.3s ease,
                    bottom 0.3s ease;
                visibility: hidden;
            }
            .toast-notification.show {
                opacity: 1;
                bottom: 30px;
                visibility: visible;
            }

            .neo-toggle-container {
                --toggle-width: 60px;
                --toggle-height: 28px;
                --toggle-bg: #181c20;
                --toggle-off-color: #475057;
                --toggle-on-color: #36f9c7;
                --toggle-transition: 0.4s cubic-bezier(0.25, 1, 0.5, 1);
                
                position: relative;
                display: inline-flex;
                flex-direction: column;
                font-family: "Segoe UI", Tahoma, sans-serif;
                font-size: 0.45rem;
                user-select: none;
                margin-bottom: 10px;
            }
            .neo-toggle-input {
                position: absolute;
                opacity: 0;
                width: 0;
                height: 0;
            }
            .neo-toggle {
                position: relative;
                width: var(--toggle-width);
                height: var(--toggle-height);
                display: block;
                cursor: pointer;
                transform: translateZ(0);
                perspective: 500px;
            }
            .neo-track {
                position: absolute;
                inset: 0;
                border-radius: calc(var(--toggle-height) / 2);
                overflow: hidden;
                transform-style: preserve-3d;
                transform: translateZ(-1px);
                transition: transform var(--toggle-transition);
                box-shadow:
                    0 1px 5px rgba(0, 0, 0, 0.4),
                    inset 0 0 0 0.5px rgba(255, 255, 255, 0.1);
            }
            .neo-background-layer {
                position: absolute;
                inset: 0;
                background: var(--toggle-bg);
                background-image: linear-gradient(
                    -45deg,
                    rgba(20, 20, 20, 0.8) 0%,
                    rgba(30, 30, 30, 0.3) 50%,
                    rgba(20, 20, 20, 0.8) 100%
                );
                opacity: 1;
                transition: all var(--toggle-transition);
            }
            .neo-grid-layer {
                position: absolute;
                inset: 0;
                background-image: linear-gradient(to right, rgba(71, 80, 87, 0.03) 1px, transparent 1px),
                    linear-gradient(to bottom, rgba(71, 80, 87, 0.03) 1px, transparent 1px);
                background-size: 3px 3px;
                opacity: 0;
                transition: opacity var(--toggle-transition);
            }
            .neo-track-highlight {
                position: absolute;
                inset: 0.5px;
                border-radius: calc(var(--toggle-height) / 2);
                background: linear-gradient(90deg, transparent, rgba(54, 249, 199, 0));
                opacity: 0;
                transition: all var(--toggle-transition);
            }
            .neo-spectrum-analyzer {
                position: absolute;
                bottom: 4px;
                right: 7px;
                height: 7px;
                display: flex;
                align-items: flex-end;
                gap: 1px;
                opacity: 0;
                transition: opacity var(--toggle-transition);
            }
            .neo-spectrum-bar {
                width: 1.5px;
                height: 2px;
                background-color: var(--toggle-on-color);
                opacity: 0.8;
            }
            .neo-thumb {
                position: absolute;
                top: 3px;
                left: 3px;
                width: calc(var(--toggle-height) - 6px);
                height: calc(var(--toggle-height) - 6px);
                border-radius: 50%;
                transform-style: preserve-3d;
                transition: transform var(--toggle-transition);
                z-index: 1;
            }
            .neo-thumb-ring {
                position: absolute;
                inset: 0;
                border-radius: 50%;
                border: 0.5px solid rgba(255, 255, 255, 0.1);
                background: var(--toggle-off-color);
                box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
                transition: all var(--toggle-transition);
            }
            .neo-thumb-core {
                position: absolute;
                inset: 3px;
                border-radius: 50%;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
                transition: all var(--toggle-transition);
                overflow: hidden;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .neo-thumb-icon {
                position: relative;
                width: 6px;
                height: 6px;
                transition: all var(--toggle-transition);
            }
            .neo-thumb-wave {
                position: absolute;
                top: 50%;
                left: 50%;
                width: 6px;
                height: 1px;
                background: var(--toggle-off-color);
                transform: translate(-50%, -50%);
                transition: all var(--toggle-transition);
            }
            .neo-thumb-pulse {
                position: absolute;
                inset: 0;
                border-radius: 50%;
                border: 0.5px solid var(--toggle-off-color);
                transform: scale(0);
                opacity: 0;
                transition: all var(--toggle-transition);
            }
            .neo-status {
                position: relative;
                bottom: 2px;
                display: flex;
                justify-content: center;
                font-size: 1.1em; 
            }
            .neo-status-indicator {
                display: flex;
                align-items: center;
                gap: 1.5px; 
            }
            .neo-status-dot {
                width: 3px; 
                height: 3px;
                border-radius: 50%;
                background-color: var(--toggle-off-color);
                transition: all var(--toggle-transition);
            }
            .neo-status-text {
                color: var(--toggle-off-color);
                letter-spacing: 0.2px; 
                transition: all var(--toggle-transition);
            }
            .neo-status-text::before {
                content: "WoW Off";
            }
            html[dir="rtl"] .neo-toggle-input:checked + .neo-toggle .neo-thumb {
                transform: translateX(calc(-1 * (var(--toggle-width) - (var(--toggle-height) - 6px) - 6px)));
            }
            html:not([dir="rtl"]) .neo-toggle-input:checked + .neo-toggle .neo-thumb {
                 transform: translateX(calc(var(--toggle-width) - (var(--toggle-height) - 6px) - 6px));
            }
            .neo-toggle-input:checked + .neo-toggle .neo-thumb-ring {
                background-color: var(--toggle-on-color);
                border-color: rgba(54, 249, 199, 0.3);
                box-shadow: 0 0 10px rgba(54, 249, 199, 0.4);
            }
            .neo-toggle-input:not(:checked) + .neo-toggle .neo-thumb-ring {
                background-color: var(--wow-toggle-off-color);
                border-color: var(--wow-toggle-off-border-color);
            }
            .neo-toggle-input:not(:checked) + .neo-toggle + .neo-status .neo-status-text,
            .neo-toggle-input:not(:checked) + .neo-toggle + .neo-status .neo-status-text::before {
                color: var(--wow-toggle-off-color);
            }
            .neo-toggle-input:not(:checked) + .neo-toggle + .neo-status .neo-status-dot {
                background-color: var(--wow-toggle-off-color);
            }
            .neo-toggle-input:checked + .neo-toggle .neo-thumb-wave {
                height: 5px;
                width: 5px;
                border-radius: 50%;
                background: transparent;
                border: 0.5px solid #fff;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-thumb-pulse {
                transform: scale(1.2);
                opacity: 0.3;
                animation: neo-pulse 1.5s infinite;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-track-highlight {
                background: linear-gradient(90deg, transparent, rgba(54, 249, 199, 0.2));
                opacity: 1;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-grid-layer {
                opacity: 1;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-spectrum-analyzer {
                opacity: 1;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-spectrum-bar:nth-child(1) {
                animation: neo-spectrum 0.9s infinite;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-spectrum-bar:nth-child(2) {
                animation: neo-spectrum 0.8s 0.1s infinite;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-spectrum-bar:nth-child(3) {
                animation: neo-spectrum 1.1s 0.2s infinite;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-spectrum-bar:nth-child(4) {
                animation: neo-spectrum 0.7s 0.1s infinite;
            }
            .neo-toggle-input:checked + .neo-toggle .neo-spectrum-bar:nth-child(5) {
                animation: neo-spectrum 0.9s 0.15s infinite;
            }
            .neo-toggle-input:checked + .neo-toggle + .neo-status .neo-status-dot {
                background-color: var(--toggle-on-color);
                box-shadow: 0 0 5px var(--toggle-on-color);
            }
            .neo-toggle-input:checked + .neo-toggle + .neo-status .neo-status-text {
                color: var(--toggle-on-color);
            }
            .neo-toggle-input:checked + .neo-toggle + .neo-status .neo-status-text::before {
                content: "WoW On";
            }
            .neo-toggle:hover .neo-thumb-ring {
                transform: scale(1.05);
            }
            .neo-toggle.neo-dragging .neo-track {
                transform: translateZ(-1px) scale(1.02);
            }
            .neo-toggle.neo-dragging .neo-thumb {
                transition: none;
            }

            @keyframes neo-pulse {
                 0%, 100% { transform: scale(0.8); opacity: 0; }
                 50% { transform: scale(1.2); opacity: 0.3; }
            }
            @keyframes neo-spectrum {
                 0%, 100% { height: 2px; }
                 50% { height: 7px; }
            }
            
            .cyberpunk-checkbox-wrapper {
                transform: scale(0.7);
                transform-origin: right;
                display: flex;
                order: 1;
                margin-bottom: 10px;
            }
            .cyberpunk-checkbox-container {
                position: relative;
            }
            .cyber-checkbox {
                position: relative;
                display: flex;
                align-items: center;
                cursor: pointer;
                user-select: none;
            }
            .cyber-checkbox input {
                opacity: 0;
                width: 0;
                height: 0;
                position: absolute;
            }
    
            .checkbox {
                position: relative;
                width: 35px;
                height: 35px;
                background: linear-gradient(135deg, #383737, #000000);
                border: 2px solid #7e0762;
                border-radius: 8px;
                box-shadow:
                    inset 2px 2px 4px rgba(0, 0, 0, 0.5),
                    inset -2px -2px 4px rgba(51, 25, 77, 0.2),
                    0 0 8px rgba(255, 0, 255, 0.3);
                transition: all 0.3s ease;
                transform: translateZ(8px);
                animation: float 3s ease-in-out infinite;
                margin-left: 8px;
            }
            .check-icon {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
                transition: all 0.3s ease;
                width: 50%;
                height: 50%;
            }
    
            .label-text {
                font-size: 20px;
                font-weight: bold;
                color: #da0db2;
                text-shadow: 0 0 4px rgba(255, 0, 255, 0.5);
                transition: all 0.3s ease;
            }
    
            .glow-layer {
                position: absolute;
                inset: -8px;
                border-radius: 10px;
                background: radial-gradient(circle, rgba(255, 0, 255, 0.2), transparent 70%);
                filter: blur(10px);
                opacity: 0;
                transition: opacity 0.3s ease;
                z-index: -1;
            }
    
            .glitch-layer {
                position: absolute;
                inset: 0;
                border-radius: 8px;
                background: transparent;
                opacity: 0;
                z-index: 1;
            }
            
            html[dir="rtl"] .cyber-checkbox {
                flex-direction: row-reverse;
            }
            html[dir="rtl"] .checkbox {
                margin-left: 0;
                margin-right: 8px;
            }

            .cyber-checkbox:hover .checkbox {
                transform: translateZ(12px) scale(1.05);
                box-shadow:
                    inset 2px 2px 4px rgba(0, 0, 0, 0.5),
                    inset -2px -2px 4px rgba(51, 25, 77, 0.3),
                    0 0 12px rgba(255, 0, 255, 0.5);
                animation: none;
            }
            .cyber-checkbox:hover .label-text {
                color: #07fafa;
                text-shadow: 0 0 6px rgba(0, 255, 255, 0.7);
            }
            .cyber-checkbox:hover .glow-layer {
                opacity: 0.5;
            }
            .cyber-checkbox input:checked + .checkbox {
                background: linear-gradient(135deg, #00ffff, #0a0f1f);
                border-color: #00ffff;
                box-shadow:
                    inset 2px 2px 4px rgba(0, 0, 0, 0.5),
                    inset -2px -2px 4px rgba(0, 255, 255, 0.2),
                    0 0 12px rgba(0, 255, 255, 0.5);
                animation: glitch 0.5s ease forwards;
            }
            .cyber-checkbox input:checked + .checkbox .check-icon {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
                animation: check-bounce 0.4s ease-out;
            }
            .cyber-checkbox input:checked ~ .label-text {
                color: #07baba;
                text-shadow: 0 0 6px rgba(16, 46, 46, 0.7);
            }
            .cyber-checkbox input:checked ~ .glow-layer {
                background: radial-gradient(circle, rgba(0, 255, 255, 0.2), transparent 70%);
                opacity: 1;
            }
            .cyber-checkbox input:checked ~ .glitch-layer {
                opacity: 1;
                animation: glitch-flash 0.5s ease forwards;
            }
            
            @keyframes glitch { 
                0% { transform: translateZ(8px) skewX(0); }
                25% { transform: translateZ(8px) skewX(10deg); }
                50% { transform: translateZ(8px) skewX(-10deg); }
                75% { transform: translateZ(8px) skewX(5deg); }
                100% { transform: translateZ(8px) skewX(0); }
            }
            @keyframes glitch-flash {
                0%, 100% { opacity: 0; }
                50% { opacity: 0.7; }
            }
            @keyframes check-bounce {
                0% { transform: translate(-50%, -50%) scale(0); }
                70% { transform: translate(-50%, -50%) scale(1.2); }
                100% { transform: translate(-50%, -50%) scale(1); }
            }
            @keyframes float {
                0%, 100% { transform: translateZ(8px) translateY(0); }
                50% { transform: translateZ(8px) translateY(-5px); }
            }
            
            .wow-container > select.form-control {
                font-size: 14px;
                padding: 6px 10px;
                height: auto;
            }

            .btn.btn-effect-two {
              line-height: 50px;
              height: 50px;
              text-align: center;
              width: 100%;
              cursor: pointer;
              border-radius: 25px;
              font-size: 18px;
              font-weight: bold;
              transition:
                transform 0.3s,
                box-shadow 0.3s;
              position: relative;
              overflow: hidden;
              padding: 0;
              border: none; 
              display: flex;
              align-items: center;
              justify-content: center;
            }
            .btn.btn-effect-two span {
              z-index: 2;
              display: flex;
              align-items: center;
              justify-content: center;
              position: relative;
              width: 100%;
              height: 100%;
            }
            .btn.btn-effect-two span .material-icons {
              margin-left: 8px; 
              margin-right: 0;
            }
            
            body.light-theme .btn.btn-effect-two::before,
            body.light-theme .btn.btn-effect-two::after {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1;
                transition: all 0.5s;
                border: 1px solid rgba(0, 0, 0, 0.15);
                background-color: rgba(0, 0, 0, 0.03);
                border-radius: 25px;
            }
            
            body.dark-theme .btn.btn-effect-two::before,
            body.dark-theme .btn.btn-effect-two::after {
              content: "";
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              z-index: 1;
              transition: all 0.5s;
              border: 1px solid rgba(255, 255, 255, 0.2);
              background-color: rgba(255, 255, 255, 0.1);
              border-radius: 25px;
            }
            
            body.light-theme .btn.btn-effect-two { color: var(--text-primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
            body.light-theme .btn.btn-effect-two:hover::before,
            body.light-theme .btn.btn-effect-two:hover::after { background-color: rgba(0, 0, 0, 0); }
            body.dark-theme .btn.btn-effect-two { color: #fff; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25); }
            body.dark-theme .btn.btn-effect-two:hover::before,
            body.dark-theme .btn.btn-effect-two:hover::after { background-color: rgba(255, 255, 255, 0); }
            body.dark-theme .btn.btn-effect-two:hover { box-shadow: 0 7px 18px rgba(0, 0, 0, 0.35); }
            body.light-theme .btn.btn-effect-two:hover { box-shadow: 0 7px 18px rgba(0, 0, 0, 0.15); }
            #ipv4-content .btn.btn-effect-two,
            #ipv6-content .btn.btn-effect-two { background-color: transparent !important; }
            .btn.btn-effect-two:hover::before { transform: rotate(-45deg); }
            .btn.btn-effect-two:hover::after { transform: rotate(45deg); }
            .btn.btn-effect-two:hover {transform: translateY(-3px); }

            @media (max-width: 992px) {
                body { padding: 15px; padding-bottom: 70px; }
                .container { padding: 20px; }
                h1 { font-size: 1.8em; }
                #guide-popup .popup-container { max-width: 95%; height: 85vh; }
            }

            @media (max-width: 768px) {
                body { padding: 10px; padding-bottom: 70px; }
                .top-container, .content-section { max-width: 100%; }
                .container { max-width: 100%; padding: 15px; }
                h1 { font-size: 1.6em; }
                h2 { font-size: 1.4em; }
                .form-control { padding: 10px; font-size: 15px; }
                .btn { padding: 10px 20px; font-size: 15px; }
                .btn.btn-effect-two { height: 45px; line-height: 45px; font-size: 16px; }
                .dual-input-container,
                .select-container,
                .ip-port-container { flex-direction: column; gap: 15px; }
                .advanced-options-container { flex-direction: column; align-items: stretch; }
                .wow-container { width: 100%; }
                .wow-container > select.form-control { flex-grow: 1; }
                .cyberpunk-checkbox-wrapper { transform-origin: center right; justify-content: flex-start; }
                 html[dir="rtl"] .cyberpunk-checkbox-wrapper { transform-origin: center left; }
                .links-popup { width: 90%; max-width: 320px; right: 5%; bottom: calc(3.5rem + 15px); }
                .links-popup .link-text { font-size: 0.7em; }
                .qr-code-container { height: 180px; }
                .qr-code-container canvas { width: 180px !important; height: 180px !important; }
                 .logo-link { top: 10px; left: 10px; }
                .logo-img { max-width: 50px; }
                .galahhad-theme-toggle-wrapper { top: 5px; right: 5px; }
                .theme-switch { --toggle-size: 13px; }
            }

            @media (max-width: 480px) {
                body { padding: 10px; padding-bottom: 60px; font-size: 14px;  }
                h1 { font-size: 1.4em; margin-bottom: 0.8em; }
                .container { padding: 10px; }
                 #ipv4-content h2, #ipv6-content h2 { font-size: 1.2em; }
                .input-field label { font-size: 13px; }
                .form-control { padding: 8px; font-size: 14px; }
                .btn {  padding: 8px 15px; font-size: 14px; }
                .btn.btn-effect-two {  height: 40px; line-height: 40px; font-size: 15px; }
                .btn.btn-effect-two span .material-icons { font-size: 18px; }
                .stylish-switcher { padding: 3px; margin-top: 10px; }
                .switcher-btn { padding: 6px 18px; font-size: 0.9em; }
                .qr-code-container { height: 150px; }
                .qr-code-container canvas { width: 150px !important; height: 150px !important; }
                .card-panel h5 { font-size: 1em; }
                #darkness-name { font-size: 0.7em; }
                .uiverse-fab-button { width: 3rem; height: 3rem; }
                .guide-btn { bottom: 15px; left: 15px; }
                .links-fab { bottom: 15px; right: 15px; }
                .links-popup { width: calc(100% - 30px); max-width: 300px; right: 15px; bottom: calc(3rem + 20px); padding: 10px; }
                .links-popup .popup-section-title { font-size: 0.9em; }
                .links-popup .link-item-title { font-size: 0.8em; }
                .links-popup .link-text { font-size: 0.65em; }
                .links-popup .copy-btn { font-size: 16px; }
                .links-popup .download-link { font-size: 0.8em; }
                .links-popup .download-link i { font-size: 18px; }
                .cyberpunk-checkbox-wrapper { transform: scale(0.6); }
                .label-text { font-size: 18px; }
                .neo-toggle-container { font-size: 0.4rem; }
                .neo-status { font-size: 1em; }
                .toast-notification { width: 90%; font-size: 0.8em; padding: 8px 15px; bottom: 15px; }
                .toast-notification.show { bottom: 25px; }
            }
            
      </style>
    </head>
    <body class="dark-theme"> <div class="galahhad-theme-toggle-wrapper">
            <label class="theme-switch">
                <input type="checkbox" class="theme-switch__checkbox" id="theme-toggle-input" />
                <div class="theme-switch__container">
                    <div class="theme-switch__circle-container">
                        <div class="theme-switch__sun-moon-container">
                            <div class="theme-switch__moon">
                                <div class="theme-switch__spot"></div>
                                <div class="theme-switch__spot"></div>
                                <div class="theme-switch__spot"></div>
                            </div>
                        </div>
                    </div>
                    <div class="theme-switch__clouds"></div>
                    <div class="theme-switch__stars-container">
                        <svg viewBox="0 0 16 16" height="16" width="16" xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)">
                            <path
                                d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.61L7.327.668A.75.75 0 018 .25z"
                                fill="currentColor"></path>
                        </svg>
                    </div>
                </div>
            </label>
        </div>

        <a href="[https://t.me/darkness_427](https://t.me/darkness_427)" target="_blank" class="logo-link">
            <img
                class="logo-img"
                src="[https://github.com/user-attachments/assets/3ec2a5a4-2bec-4af5-a976-e45f985dd63e](https://github.com/user-attachments/assets/3ec2a5a4-2bec-4af5-a976-e45f985dd63e)"
                alt="لوگو" />
        </a>

        <div class="top-container">
            <h1>Warp to Hiddify Next</h1>
            <div class="stylish-switcher">
                <div class="switcher-background"></div>
                <button class="switcher-btn" data-protocol="ipv4">IPv4</button>
                <button class="switcher-btn" data-protocol="ipv6">IPv6</button>
            </div>
        </div>

        <button class="guide-btn uiverse-fab-button fab-ali-tahmazi-effect" id="open-guide-btn">
            <span class="uiverse-container-stars">
                <span class="uiverse-stars"></span>
            </span>
            <span class="uiverse-glow">
                <span class="circle"></span>
                <span class="circle"></span>
            </span>
            <span class="uiverse-fab-content">
                <i class="material-icons">school</i>
            </span>
        </button>
        <button class="links-fab uiverse-fab-button fab-ali-tahmazi-effect" id="links-fab-btn">
            <span class="uiverse-container-stars">
                <span class="uiverse-stars"></span>
            </span>
            <span class="uiverse-glow">
                <span class="circle"></span>
                <span class="circle"></span>
            </span>
            <span class="uiverse-fab-content">
                <img
                     src="[https://raw.githubusercontent.com/darknessm427/Sub/main/Image/Hiddify/hiddify.png](https://raw.githubusercontent.com/darknessm427/Sub/main/Image/Hiddify/hiddify.png)"
                     alt="Hiddify Links Icon" />
            </span>
        </button>

        <div class="links-popup" id="links-popup-menu">
            <div class="popup-section-title"><i class="material-icons">favorite</i>سابلینک اتومات</div>

            <div class="link-item-container">
                <div class="link-item-title">Sub IPv4</div>
                <div class="link-item">
                    <span class="link-text" id="rawLinkIPv4Text"
                        >[https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv4](https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv4)</span
                    >
                    <i
                        class="material-icons copy-btn"
                        onclick="copyRawLink('[https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv4](https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv4)', 'Sub IPv4 کپی شد!')"
                        >content_copy</i
                    >
                </div>
            </div>

            <div class="link-item-container">
                <div class="link-item-title">Sub IPv6</div>
                <div class="link-item">
                    <span class="link-text" id="rawLinkIPv6Text"
                        >[https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv6](https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv6)</span
                    >
                    <i
                        class="material-icons copy-btn"
                        onclick="copyRawLink('[https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv6](https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main/Warp/IPv6)', 'Sub IPv6 کپی شد!')"
                        >content_copy</i
                    >
                </div>
            </div>

            <div class="popup-section-title" style="margin-top: 10px">
                <i class="material-icons">download</i>دانلود کلاینت‌ hiddify next
            </div>
            <div class="download-item">
                <a href="[https://github.com/hiddify/hiddify-next/releases](https://github.com/hiddify/hiddify-next/releases)" target="_blank" class="download-link">
                    <i class="fab fa-github"></i> GitHub
                </a>
            </div>
            <div class="download-item">
                <a
                    href="[https://play.google.com/store/apps/details?id=com.hiddify.hiddify](https://play.google.com/store/apps/details?id=com.hiddify.hiddify)"
                    target="_blank"
                    class="download-link">
                    <i class="fab fa-android"></i> Android
                </a>
            </div>
            <div class="download-item">
                <a href="[https://apps.apple.com/us/app/hiddify-next/id6473248953](https://apps.apple.com/us/app/hiddify-next/id6473248953)" target="_blank" class="download-link">
                    <i class="fab fa-apple"></i> iOS
                </a>
            </div>
            <div class="download-item">
                <a href="[https://github.com/hiddify/hiddify-next/releases](https://github.com/hiddify/hiddify-next/releases)" target="_blank" class="download-link">
                    <i class="fab fa-windows"></i> windows
                </a>
            </div>

            <div class="popup-section-title" style="margin-top: 10px">
                <i class="material-icons">share</i> Follow me Here‌
            </div>
            <div class="download-item">
                <a href="[https://github.com/darknessm427](https://github.com/darknessm427)" target="_blank" class="download-link">
                    <i class="fab fa-github"></i> GitHub
                </a>
                <a href="[https://t.me/darkness_427](https://t.me/darkness_427)" target="_blank" class="download-link">
                    <i class="fab fa-telegram"></i> Telegram
                </a>
                <a href="[https://x.com/mansor427](https://x.com/mansor427)" target="_blank" class="download-link">
                    <i class="fab fa-twitter"></i> twitter
                </a>
            </div>
        </div>

        <div id="ipv4-content" class="content-section">
            <div class="container">
                <h2>𓄂ʷᵃʳᵖᵢₚᵥ₄𓆃</h2>
                <form id="warpinatorFormIPv4">
                    <div class="input-field dual-input-container">
                        <div class="input-wrapper">
                            <label for="username-ipv4">نام کانفیگ لوکال</label>
                            <input id="username-ipv4" type="text" class="form-control" placeholder="𓄂ʷᵃʳᵖᵢₚᵥ₄𓆃" />
                        </div>
                        <div class="input-wrapper hidden" id="wow-name-wrapper-ipv4">
                            <label for="wow-name-ipv4">نام کانفیگ WoW </label>
                            <input id="wow-name-ipv4" type="text" class="form-control" placeholder="WoW IPv4" />
                        </div>
                    </div>
                    <div class="input-field">
                        <label for="license-ipv4">کلید لایسنس Warp</label
                        ><input id="license-ipv4" type="text" class="form-control" placeholder="(اختیاری)" />
                    </div>
                    <div class="input-field">
                        <div class="select-container">
                            <div class="select-item">
                                <label for="type1-ipv4">ifp</label
                                ><select id="type1-ipv4" class="form-control">
                                    <option value="40-80" selected>40-80</option>
                                    <option value="10-20">10-20</option>
                                    <option value="20-30">20-30</option>
                                    <option value="30-40">30-40</option>
                                    <option value="40-50">40-50</option>
                                    <option value="50-60">50-60</option>
                                    <option value="60-70">60-70</option>
                                    <option value="70-80">70-80</option>
                                    <option value="80-90">80-90</option>
                                    <option value="90-100">90-100</option>
                                    <option value="20-40">20-40</option>
                                    <option value="30-60">30-60</option>
                                    <option value="50-100">50-100</option>
                                </select>
                            </div>
                            <div class="select-item">
                                <label for="type2-ipv4">ifp size</label
                                ><select id="type2-ipv4" class="form-control">
                                    <option value="50-100" selected>50-100</option>
                                    <option value="10-20">10-20</option>
                                    <option value="20-30">20-30</option>
                                    <option value="30-40">30-40</option>
                                    <option value="40-50">40-50</option>
                                    <option value="50-60">50-60</option>
                                    <option value="60-70">60-70</option>
                                    <option value="70-80">70-80</option>
                                    <option value="80-90">80-90</option>
                                    <option value="90-100">90-100</option>
                                    <option value="20-40">20-40</option>
                                    <option value="30-60">30-60</option>
                                    <option value="40-80">40-80</option>
                                    </select>
                            </div>
                        </div>
                    </div>
                    <div class="input-field">
                        <div class="select-container">
                            <div class="select-item">
                                <label for="type3-ipv4">ifp delay</label
                                ><select id="type3-ipv4" class="form-control">
                                    <option value="2-4" selected>2-4</option>
                                    <option value="1-2">1-2</option>
                                    <option value="2-3">2-3</option>
                                    <option value="3-4">3-4</option>
                                    <option value="4-5">4-5</option>
                                    <option value="5-6">5-6</option>
                                    <option value="6-7">6-7</option>
                                    <option value="7-8">7-8</option>
                                    <option value="8-9">8-9</option>
                                    <option value="9-10">9-10</option> <option value="3-6">3-6</option>
                                    <option value="4-8">4-8</option>
                                    <option value="5-10">5-10</option>
                                </select>
                            </div>
                            <div class="select-item">
                                <label for="type4-ipv4">ifp mode</label
                                ><select id="type4-ipv4" class="form-control">
                                    <option value="m4" selected>m4</option>
                                    <option value="m1">m1</option>
                                    <option value="m2">m2</option>
                                    <option value="m3">m3</option>
                                    <option value="m5">m5</option>
                                    <option value="m6">m6</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="cyberpunk-checkbox-wrapper">
                        <label class="cyber-checkbox">
                            <input id="cyber-autofill-ipv4" type="checkbox" onchange="toggleAutoFill(4)" />
                            <span class="checkbox">
                                <svg
                                     class="check-icon"
                                     viewBox="0 0 20 20"
                                     fill="none"
                                     xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)">
                                    <path
                                          d="M4.5 10.5L8 14L15.5 6.5"
                                          stroke="white"
                                          stroke-width="2"
                                          stroke-linecap="round"
                                          stroke-linejoin="round"></path>
                                </svg>
                            </span>
                            <span class="label-text">پر کردن خودکار IP !</span>
                            <span class="glow-layer"></span>  <span class="glitch-layer"></span> </label>
                    </div>

                    <div class="input-field">
                        <div class="ip-port-container">
                            <div class="ip-port-item">
                                <label for="ip-ipv4">آدرس IP (اختیاری)</label
                                ><input id="ip-ipv4" type="text" value="162.159.192.76" class="form-control" />
                            </div>
                            <div class="ip-port-item">
                                <label for="port-ipv4">پورت (اختیاری)</label
                                ><input id="port-ipv4" type="number" value="2408" class="form-control" />
                            </div>
                        </div>
                    </div>
                    <div class="input-field advanced-options-container">
                        <div class="wow-container">
                            <div class="neo-toggle-container">
                                <input class="neo-toggle-input" id="neo-wow-toggle-ipv4" type="checkbox" />
                                <label class="neo-toggle" for="neo-wow-toggle-ipv4">
                                    <div class="neo-track">
                                        <div class="neo-background-layer"></div>
                                        <div class="neo-grid-layer"></div>
                                        <div class="neo-track-highlight"></div>
                                        <div class="neo-spectrum-analyzer">
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                        </div>
                                    </div>
                                    <div class="neo-thumb">
                                        <div class="neo-thumb-ring"></div>
                                        <div class="neo-thumb-core">
                                            <div class="neo-thumb-icon"><div class="neo-thumb-wave"></div></div>
                                        </div>
                                        <div class="neo-thumb-pulse"></div>
                                    </div>
                                </label>
                                <div class="neo-status">
                                    <div class="neo-status-indicator">
                                        <div class="neo-status-dot"></div>
                                        <span class="neo-status-text"></span>
                                    </div>
                                </div>
                            </div>
                            <select
                                id="wow-select-ipv4"
                                class="form-control"
                                disabled
                                style="margin-right: 1px; flex-grow: 1"> <option value="ipv4" selected>WoW to IPv4</option>
                                <option value="ipv6">WoW to IPv6</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-effect-two" type="submit"><span>ساخت کانفیگ <i class="material-icons">send</i></span></button>
                </form>
                <div class="card-panel" id="result-ipv4">
                    <div class="qr-code-container" id="qrCodeContainerIPv4"></div>
                    <h5>لینک ساخته شده:</h5>
                    <div class="input-field">
                        <label for="generatedUrl-ipv4">لینک</label
                        ><input id="generatedUrl-ipv4" type="text" readonly class="form-control" />
                    </div>
                    <button class="btn btn-effect-two" onclick="copyToClipboard('generatedUrl-ipv4', 'لینک کانفیگ IPv4 کپی شد!')">
                        <span>کپی کردن لینک <i class="material-icons">content_copy</i></span>
                    </button>
                </div>
            </div>
        </div>

        <div id="ipv6-content" class="content-section hidden">
            <div class="container">
                <h2>𓄂ʷᵃʳᵖᵢₚᵥ₆𓆃</h2>
                <form id="warpinatorFormIPv6">
                    <div class="input-field dual-input-container">
                        <div class="input-wrapper">
                            <label for="username-ipv6"> نام کانفیگ لوکال</label>
                            <input id="username-ipv6" type="text" class="form-control" placeholder="𓄂ʷᵃʳᵖᵢₚᵥ₆𓆃" />
                        </div>
                        <div class="input-wrapper hidden" id="wow-name-wrapper-ipv6">
                            <label for="wow-name-ipv6">نام کانفیگ WoW </label>
                            <input id="wow-name-ipv6" type="text" class="form-control" placeholder="WoW IPv4" /> </div>
                    </div>
                    <div class="input-field">
                        <label for="license-ipv6">کلید لایسنس Warp</label
                        ><input id="license-ipv6" type="text" class="form-control" placeholder="(اختیاری)" />
                    </div>
                    <div class="input-field">
                        <div class="select-container">
                            <div class="select-item">
                                <label for="type1-ipv6">ifp</label
                                ><select id="type1-ipv6" class="form-control">
                                    <option value="40-80" selected>40-80</option>
                                    <option value="10-20">10-20</option>
                                    <option value="20-30">20-30</option>
                                    <option value="30-40">30-40</option>
                                    <option value="40-50">40-50</option>
                                    <option value="50-60">50-60</option>
                                    <option value="60-70">60-70</option>
                                    <option value="70-80">70-80</option>
                                    <option value="80-90">80-90</option>
                                    <option value="90-100">90-100</option>
                                    <option value="20-40">20-40</option>
                                    <option value="30-60">30-60</option>
                                    <option value="50-100">50-100</option>
                                </select>
                            </div>
                            <div class="select-item">
                                <label for="type2-ipv6">ifp size</label
                                ><select id="type2-ipv6" class="form-control">
                                    <option value="50-100" selected>50-100</option>
                                    <option value="10-20">10-20</option>
                                    <option value="20-30">20-30</option>
                                    <option value="30-40">30-40</option>
                                    <option value="40-50">40-50</option>
                                    <option value="50-60">50-60</option>
                                    <option value="60-70">60-70</option>
                                    <option value="70-80">70-80</option>
                                    <option value="80-90">80-90</option>
                                    <option value="90-100">90-100</option>
                                    <option value="20-40">20-40</option>
                                    <option value="30-60">30-60</option>
                                    <option value="40-80">40-80</option>
                                    </select>
                            </div>
                        </div>
                    </div>
                    <div class="input-field">
                        <div class="select-container">
                            <div class="select-item">
                                <label for="type3-ipv6">ifp delay</label
                                ><select id="type3-ipv6" class="form-control">
                                    <option value="2-4" selected>2-4</option>
                                    <option value="1-2">1-2</option>
                                    <option value="2-3">2-3</option>
                                    <option value="3-4">3-4</option>
                                    <option value="4-5">4-5</option>
                                    <option value="5-6">5-6</option>
                                    <option value="6-7">6-7</option>
                                    <option value="7-8">7-8</option>
                                    <option value="8-9">8-9</option>
                                    <option value="9-10">9-10</option> <option value="3-6">3-6</option>
                                    <option value="4-8">4-8</option>
                                    <option value="5-10">5-10</option>
                                </select>
                            </div>
                            <div class="select-item">
                                <label for="type4-ipv6">ifp mode</label> ><select id="type4-ipv6" class="form-control">
                                    <option value="m4" selected>m4</option>
                                    <option value="m1">m1</option>
                                    <option value="m2">m2</option>
                                    <option value="m3">m3</option>
                                    <option value="m5">m5</option>
                                    <option value="m6">m6</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="cyberpunk-checkbox-wrapper">
                        <label class="cyber-checkbox">
                            <input id="cyber-autofill-ipv6" type="checkbox" onchange="toggleAutoFill(6)" />
                            <span class="checkbox">
                                <svg
                                     class="check-icon"
                                     viewBox="0 0 20 20"
                                     fill="none"
                                     xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)">
                                    <path
                                          d="M4.5 10.5L8 14L15.5 6.5"
                                          stroke="white"
                                          stroke-width="2"
                                          stroke-linecap="round"
                                          stroke-linejoin="round"></path>
                                </svg>
                            </span>
                            <span class="label-text">پر کردن خودکار IP !</span>
                            <span class="glow-layer"></span>  <span class="glitch-layer"></span> </label>
                    </div>
                    <div class="input-field">
                        <label for="ip-ipv6">آدرس IP (اختیاری)</label
                        ><input
                            id="ip-ipv6"
                            type="text"
                            class="form-control"
                            placeholder="انتخاب خودکار یا ورود دستی" />
                    </div>
                    <div class="input-field advanced-options-container">
                        <div class="wow-container">
                            <div class="neo-toggle-container">
                                <input class="neo-toggle-input" id="neo-wow-toggle-ipv6" type="checkbox" />
                                <label class="neo-toggle" for="neo-wow-toggle-ipv6">
                                    <div class="neo-track">
                                        <div class="neo-background-layer"></div>
                                        <div class="neo-grid-layer"></div>
                                        <div class="neo-track-highlight"></div>
                                        <div class="neo-spectrum-analyzer">
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                            <div class="neo-spectrum-bar"></div>
                                        </div>
                                    </div>
                                    <div class="neo-thumb">
                                        <div class="neo-thumb-ring"></div>
                                        <div class="neo-thumb-core">
                                            <div class="neo-thumb-icon"><div class="neo-thumb-wave"></div></div>
                                        </div>
                                        <div class="neo-thumb-pulse"></div>
                                    </div>
                                </label>
                                <div class="neo-status">
                                    <div class="neo-status-indicator">
                                        <div class="neo-status-dot"></div>
                                        <span class="neo-status-text"></span>
                                    </div>
                                </div>
                            </div>
                            <select
                                id="wow-select-ipv6"
                                class="form-control"
                                disabled
                                style="margin-right: 10px; flex-grow: 1"> <option value="ipv4" selected>WoW to IPv4</option>
                                <option value="ipv6">WoW to IPv6</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-effect-two" type="submit"><span>ساخت کانفیگ <i class="material-icons">send</i></span></button>
                </form>
                <div class="card-panel" id="result-ipv6">
                    <div class="qr-code-container" id="qrCodeContainerIPv6"></div>
                    <h5>لینک ساخته شده:</h5>
                    <div class="input-field">
                        <label for="generatedUrl-ipv6">لینک</label
                        ><input id="generatedUrl-ipv6" type="text" readonly class="form-control" />
                    </div>
                    <button class="btn btn-effect-two" onclick="copyToClipboard('generatedUrl-ipv6', 'لینک کانفیگ IPv6 کپی شد!')">
                        <span>کپی کردن لینک <i class="material-icons">content_copy</i></span>
                    </button>
                </div>
            </div>
        </div>

        <div id="darkness-name">
            <a href="[https://t.me/darkness_427](https://t.me/darkness_427)" target="_blank"><h2>ÐΛɌ₭ᑎΞ𐒡𐒡</h2></a>
        </div>

        <div id="guide-popup" class="popup-overlay">
            <div class="popup-container">
                <div class="popup-header">
                    <button id="close-guide-btn" class="popup-close-btn">&times;</button>
                </div>
                <div class="popup-content">
                    <div class="popup-content-wrapper">
                        <div class="container"> <article>
                                <header><h1>وارپ در Hiddify Next: راهنمای جامع مدها، ویژگی‌ها و امنیت</h1></header>
                                <p>
                                    وارپ (WARP) سرویسی از کلادفلر مبتنی بر پروتکل WireGuard است که در Hiddify Next با
                                    هدف اصلی عبور از فیلترینگ و افزایش امنیت آنلاین کاربران به کار می‌رود. این سرویس با
                                    رمزگذاری ترافیک و پنهان‌سازی آدرس IP واقعی کاربر، به ایجاد یک اتصال امن و خصوصی کمک
                                    می‌کند. در این مقاله، به بررسی جامع مدهای مختلف وارپ در Hiddify Next، ویژگی‌های
                                    پیشرفته و جنبه‌های امنیتی آن می‌پردازیم.
                                </p>
                                <section>
                                    <h2>چرا وارپ در Hiddify Next؟</h2>
                                    <p>
                                        ادغام وارپ در Hiddify Next به کاربران امکان می‌دهد تا از قابلیت‌های پیشرفته این
                                        اپلیکیشن برای سفارشی‌سازی و مبهم‌سازی (Obfuscation) ترافیک وارپ بهره‌مند شوند.
                                        این امر به‌ویژه برای مقابله با سیستم‌های فیلترینگ پیشرفته که سعی در شناسایی و
                                        مسدودسازی پروتکل‌های VPN استاندارد دارند، حائز اهمیت است.
                                    </p>
                                </section>
                                <section>
                                    <h2>انواع مدهای وارپ (پارامتر <code>ifpm</code>) در Hiddify Next</h2>
                                    <p>
                                        در Hiddify Next، شش مد اصلی و دو مد پیشرفته برای وارپ از طریق پارامتر
                                        <code>ifpm</code> (مخفف ifp mode) قابل تنظیم هستند. این مدها با تعیین نحوه ساخت
                                        هدر (و افزودن نویز) برای ترافیک وارپ، به کاهش احتمال شناسایی آن توسط سیستم‌های
                                        فیلترینگ و بازرسی عمیق بسته (DPI) کمک می‌کنند.
                                    </p>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>نام مد</th>
                                                <th>توضیح</th>
                                                <th>ویژگی‌های کلیدی</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><code>m1</code></td>
                                                <td>هدر به صورت تصادفی ایجاد می‌شود.</td>
                                                <td>ساده‌ترین حالت با نویز تصادفی در هدر.</td>
                                            </tr>
                                            <tr>
                                                <td><code>m2</code></td>
                                                <td>هدر تصادفی و بدون تغییر؛ بدون اثر WireGuard و WARP در هدر.</td>
                                                <td>هدر مخفی و تصادفی، بدون نشانه پروتکل.</td>
                                            </tr>
                                            <tr>
                                                <td><code>m3</code></td>
                                                <td>استفاده از پروتکل QUIC برای ایجاد هدر.</td>
                                                <td>هدر مبتنی بر QUIC برای پنهان‌سازی بهتر.</td>
                                            </tr>
                                            <tr>
                                                <td><code>m4</code></td>
                                                <td>استفاده از QUIC و هدر غیرقابل تغییر؛ بدون اثر WireGuard و WARP.</td>
                                                <td>
                                                    <strong>مد پیشنهادی؛</strong> بهترین تعادل در مخفی‌سازی و پایداری
                                                    هدر.
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><code>m5</code></td>
                                                <td>استفاده از LQUIC (نسخه بهبودیافته QUIC) برای هدر.</td>
                                                <td>نسخه پیشرفته‌تر QUIC با نویز بیشتر.</td>
                                            </tr>
                                            <tr>
                                                <td><code>m6</code></td>
                                                <td>استفاده از LQUIC بدون تغییر و بدون اثر پروتکل.</td>
                                                <td>حالت پایدار و مخفی LQUIC.</td>
                                            </tr>
                                            <tr>
                                                <td><code>gHEX</code></td>
                                                <td>
                                                    حالت پیشرفته با استفاده از یک عدد HEX متغیر برای ایجاد نویز در هدر.
                                                </td>
                                                <td>نویز پیشرفته و متغیر مبتنی بر عدد HEX.</td>
                                            </tr>
                                            <tr>
                                                <td><code>hHEX</code></td>
                                                <td>مشابه <code>gHEX</code>، اما با عدد HEX ثابت و بدون اثر پروتکل.</td>
                                                <td>نویز ثابت مبتنی بر عدد HEX؛ مخفی‌ترین حالت.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </section>
                                <section>
                                    <h2>نحوه استفاده از مدها در کانفیگ وارپ</h2>
                                    <p>
                                        فرمت کلی تنظیم مد وارپ در بخش <code>warp</code> کانفیگ Hiddify Next به شکل زیر
                                        است:
                                    </p>
                                    <pre><code>warp://auto?ifpm=mode#نام_دلخواه</code></pre>
                                    <h3>مثال برای مدهای استاندارد:</h3>
                                    <pre><code>warp://auto?ifpm=m4#MyWarpM4</code></pre>
                                    <h3>
                                        مثال برای مدهای HEX (به جای <code>04ad5d</code> از عدد HEX دلخواه خود استفاده
                                        کنید):
                                    </h3>
                                    <pre><code>warp://auto?ifpm=g04ad5d#MyWarpGHEX
warp://auto?ifpm=h04ad5d#MyWarpHHEX</code></pre>
                                </section>
                                <section>
                                    <h2>ویژگی‌های پیشرفته نویزدهی در وارپ</h2>
                                    <p>
                                        علاوه بر <code>ifpm</code>، پارامترهای دیگری برای کنترل دقیق‌تر بسته‌های نویز و
                                        افزایش مقاومت در برابر شناسایی وجود دارند:
                                    </p>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>پارامتر</th>
                                                <th>توضیح</th>
                                                <th>مثال (مقادیر بازه قابل تنظیم هستند)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><code>ifp</code></td>
                                                <td>تعداد بسته‌های نویز تصادفی اضافه شده به ترافیک (در یک بازه).</td>
                                                <td><code>ifp=40-80</code></td>
                                            </tr>
                                            <tr>
                                                <td><code>ifps</code></td>
                                                <td>سایز بسته‌های نویز (بر حسب بایت) به صورت بازه.</td>
                                                <td><code>ifps=40-100</code></td>
                                            </tr>
                                            <tr>
                                                <td><code>ifpd</code></td>
                                                <td>تاخیر در ارسال بسته‌های نویز (بر حسب میلی‌ثانیه) به صورت بازه.</td>
                                                <td><code>ifpd=40-80</code></td>
                                            </tr>
                                            <tr>
                                                <td><code>detour</code></td>
                                                <td>
                                                    قابلیت "وارپ در وارپ" (Warp on Warp) برای افزایش امنیت و پایداری.
                                                </td>
                                                <td><code>warp://auto&amp;&amp;detour=warp://auto</code></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </section>
                                <section>
                                    <h2>جدول مقایسه کلی مدهای وارپ</h2>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>مد</th>
                                                <th>نوع هدر</th>
                                                <th>پروتکل پایه / تکنیک هدر</th>
                                                <th>اثر پروتکل در هدر</th>
                                                <th>سطح نویز</th>
                                                <th>درجه پنهان‌سازی</th>
                                                <th>کاربرد پیشنهادی</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><code>m1</code></td>
                                                <td>تصادفی</td>
                                                <td>WireGuard</td>
                                                <td>دارد</td>
                                                <td>متوسط</td>
                                                <td>کم</td>
                                                <td>تست اولیه و سناریوهای ساده</td>
                                            </tr>
                                            <tr>
                                                <td><code>m2</code></td>
                                                <td>تصادفی (بدون اثر)</td>
                                                <td>WireGuard</td>
                                                <td>ندارد</td>
                                                <td>متوسط</td>
                                                <td>خوب</td>
                                                <td>مخفی‌سازی بهتر از <code>m1</code></td>
                                            </tr>
                                            <tr>
                                                <td><code>m3</code></td>
                                                <td>QUIC</td>
                                                <td>QUIC</td>
                                                <td>دارد</td>
                                                <td>بالا</td>
                                                <td>بهتر</td>
                                                <td>عبور از فیلترینگ با تکیه بر QUIC</td>
                                            </tr>
                                            <tr>
                                                <td><code>m4</code></td>
                                                <td>QUIC (بدون اثر)</td>
                                                <td>QUIC</td>
                                                <td>ندارد</td>
                                                <td>بالا</td>
                                                <td>عالی</td>
                                                <td><strong>مد پیشنهادی عمومی؛</strong> پایدار و با پنهان‌سازی بالا</td>
                                            </tr>
                                            <tr>
                                                <td><code>m5</code></td>
                                                <td>LQUIC</td>
                                                <td>LQUIC</td>
                                                <td>دارد</td>
                                                <td>بسیار بالا</td>
                                                <td>عالی</td>
                                                <td>نویز پیشرفته با LQUIC</td>
                                            </tr>
                                            <tr>
                                                <td><code>m6</code></td>
                                                <td>LQUIC (بدون اثر)</td>
                                                <td>LQUIC</td>
                                                <td>ندارد</td>
                                                <td>بسیار بالا</td>
                                                <td>عالی</td>
                                                <td>پایدارترین حالت LQUIC با پنهان‌سازی بالا</td>
                                            </tr>
                                            <tr>
                                                <td><code>gHEX</code></td>
                                                <td>عدد HEX متغیر</td>
                                                <td>هدر سفارشی</td>
                                                <td>ندارد</td>
                                                <td>بسیار بالا</td>
                                                <td>پیشرفته</td>
                                                <td>نویز کاملاً سفارشی و متغیر</td>
                                            </tr>
                                            <tr>
                                                <td><code>hHEX</code></td>
                                                <td>عدد HEX ثابت</td>
                                                <td>هدر سفارشی</td>
                                                <td>ندارد</td>
                                                <td>بسیار بالا</td>
                                                <td>پیشرفته</td>
                                                <td>مخفی‌ترین حالت با نویز ثابت و سفارشی</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </section>
                                <section>
                                    <h2>امنیت در وارپ: از سرویس پایه تا ادغام در Hiddify Next</h2>
                                    <p>
                                        امنیت کاربران هنگام استفاده از وارپ، هم از طریق ویژگی‌های ذاتی سرویس کلادفلر و
                                        هم با قابلیت‌های افزوده شده توسط Hiddify Next تأمین می‌شود.
                                    </p>
                                    <h3>۱. امنیت ذاتی سرویس وارپ (Cloudflare WARP)</h3>
                                    <p>سرویس وارپ کلادفلر به خودی خود دارای چندین لایه امنیتی و حریم خصوصی است:</p>
                                    <ul>
                                        <li>
                                            <strong>رمزگذاری قدرتمند با WireGuard:</strong> وارپ بر پایه پروتکل مدرن و
                                            کارآمد WireGuard ساخته شده است. WireGuard به دلیل سرعت بالا، سربار کم، و سطح
                                            حمله کوچک‌تر نسبت به پروتکل‌های قدیمی‌تر VPN، امنیت بالایی را برای داده‌های
                                            در حال انتقال فراهم می‌کند.
                                        </li>
                                        <li>
                                            <strong>تفکیک امن DNS:</strong> ترافیک DNS کاربران وارپ معمولاً از طریق
                                            سرورهای DNS امن 1.1.1.1 کلادفلر (که از DNS-over-HTTPS و DNS-over-TLS
                                            پشتیبانی می‌کنند) هدایت می‌شود. این کار از شنود یا دستکاری درخواست‌های DNS
                                            توسط ISP یا سایر عوامل مخرب جلوگیری می‌کند و حریم خصوصی جستجوهای آنلاین را
                                            افزایش می‌دهد.
                                        </li>
                                        <li>
                                            <strong>پنهان‌سازی آدرس IP واقعی:</strong> وارپ آدرس IP واقعی شما را از
                                            وب‌سایت‌ها و سرویس‌هایی که بازدید می‌کنید، پنهان نگه می‌دارد. این امر به
                                            جلوگیری از ردیابی آنلاین و محافظت از هویت دیجیتال شما کمک می‌کند.
                                        </li>
                                        <li>
                                            <strong>سیاست حفظ حریم خصوصی کلادفلر:</strong> کلادفلر متعهد به حفظ حریم
                                            خصوصی کاربران سرویس 1.1.1.1 و وارپ است. این شرکت اعلام کرده که اطلاعات شخصی
                                            قابل شناسایی کاربران را نمی‌فروشد و از آن‌ها برای هدف‌گیری تبلیغاتی استفاده
                                            نمی‌کند. گزارش‌های مربوط به فعالیت (لاگ‌ها) به صورت محدود و برای اهداف
                                            عملیاتی (مانند بهبود سرویس و رفع اشکال) و به شکل غیرقابل شناسایی برای مدت
                                            کوتاهی (معمولاً ۲۴ ساعت) نگهداری می‌شوند.
                                        </li>
                                    </ul>
                                    <h3>۲. افزایش امنیت و مقاومت با Hiddify Next</h3>
                                    <p>
                                        Hiddify Next با افزودن قابلیت‌های سفارشی‌سازی، لایه‌های امنیتی و مقاومتی بیشتری
                                        را به سرویس وارپ اضافه می‌کند:
                                    </p>
                                    <ul>
                                        <li>
                                            <strong>مبهم‌سازی پیشرفته ترافیک:</strong> همانطور که پیشتر توضیح داده شد،
                                            مدهای مختلف هدر (<code>ifpm</code>) و پارامترهای نویزدهی (<code>ifp</code>,
                                            <code>ifps</code>, <code>ifpd</code>) در Hiddify Next به گونه‌ای طراحی
                                            شده‌اند که شناسایی ترافیک وارپ را برای فایروال‌ها و سیستم‌های DPI بسیار
                                            دشوارتر کنند. این قابلیت، کلید عبور از فیلترینگ‌های پیچیده است.
                                        </li>
                                        <li>
                                            <strong>قابلیت وارپ در وارپ (<code>detour</code>):</strong> امکان مسیریابی
                                            ترافیک یک اتصال وارپ از طریق یک اتصال وارپ دیگر، یک لایه امنیتی مضاعف ایجاد
                                            می‌کند. این کار می‌تواند IP نهایی را تغییر داده و تحلیل ترافیک را برای
                                            سیستم‌های نظارتی پیچیده‌تر سازد.
                                        </li>
                                        <li>
                                            <strong>متن‌باز بودن Hiddify Next:</strong> شفافیت کد منبع Hiddify Next به
                                            جامعه کاربری و متخصصان امنیتی اجازه می‌دهد تا کد آن را به طور مستقل بررسی
                                            کرده، آسیب‌پذیری‌های احتمالی را شناسایی و به بهبود مستمر امنیت آن کمک کنند.
                                        </li>
                                        <li>
                                            <strong>استفاده از وارپ پلاس (اختیاری):</strong> برای کاربرانی که به حجم
                                            ترافیک بیشتر و پایداری بالقوه بالاتر در شبکه کلادفلر نیاز دارند، استفاده از
                                            حساب‌های وارپ پلاس توصیه می‌شود. این امر هرچند مستقیماً یک ویژگی امنیتی
                                            نیست، اما می‌تواند به تجربه کاربری بهتر و اتصال پایدارتر کمک کند.
                                        </li>
                                    </ul>
                                </section>
                                <section>
                                    <h2>نمونه کانفیگ پیشرفته وارپ</h2>
                                    <p>در اینجا یک نمونه کانفیگ پیشرفته با ترکیب ویژگی‌های مختلف ارائه شده است:</p>
                                    <pre><code>warp://auto?ifp=30-70&amp;ifps=50-90&amp;ifpd=50-100&amp;ifpm=m4#WarpMain&amp;&amp;detour=warp://auto?ifpm=m3#WarpDetour</code></pre>
                                    <p>این کانفیگ شامل موارد زیر است:</p>
                                    <ul>
                                        <li>
                                            <strong>وارپ اصلی:</strong>
                                            <ul>
                                                <li>مد هدر: <code>m4</code> (پیشنهادی)</li>
                                                <li>تعداد بسته‌های نویز (<code>ifp</code>): بین ۳۰ تا ۷۰</li>
                                                <li>سایز بسته‌های نویز (<code>ifps</code>): بین ۵۰ تا ۹0 بایت</li>
                                                <li>
                                                    تاخیر ارسال بسته‌های نویز (<code>ifpd</code>): بین ۵۰ تا ۱۰۰
                                                    میلی‌ثانیه
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <strong>وارپ ثانویه (<code>detour</code>):</strong>
                                            <ul>
                                                <li>مد هدر: <code>m3</code> (مبتنی بر QUIC)</li>
                                            </ul>
                                        </li>
                                    </ul>
                                    <p>
                                        این ترکیب، یک اتصال وارپ با مبهم‌سازی قوی را از طریق یک اتصال وارپ دیگر (با
                                        مبهم‌سازی متفاوت) عبور می‌دهد و امنیت و مقاومت اتصال را به شکل قابل توجهی افزایش
                                        می‌دهد.
                                    </p>
                                </section>
                                <section>
                                    <h2>جمع‌بندی</h2>
                                    <p>
                                        وارپ در Hiddify Next ابزاری قدرتمند برای دستیابی به اینترنت آزاد و امن است. با
                                        بهره‌گیری از امنیت ذاتی سرویس وارپ کلادفلر و ترکیب آن با مدهای هشت‌گانه
                                        <code>ifpm</code> و پارامترهای پیشرفته نویزدهی در Hiddify Next، کاربران
                                        می‌توانند ترافیک خود را به طور مؤثری پنهان کرده و از سد فیلترینگ عبور کنند. مد
                                        <code>m4</code> به عنوان نقطه شروعی متوازن و کارآمد توصیه می‌شود، اما کاربران
                                        حرفه‌ای می‌توانند با آزمایش سایر مدها و تنظیمات، بهینه ترین حالت را برای شرایط
                                        شبکه خود بیابند. قابلیت "وارپ در وارپ" (<code>detour</code>) نیز لایه‌ای اضافی
                                        از امنیت و انعطاف‌پذیری را به ارمغان می‌آورد.
                                    </p>
                                    <p>
                                        برای دریافت آخرین اطلاعات، نمونه کانفیگ‌ها و آموزش‌های تکمیلی، همواره به
                                        <a href="[https://hiddify.com/docs/](https://hiddify.com/docs/)" target="_blank" rel="noopener noreferrer"
                                            >مستندات رسمی Hiddify Next</a
                                        >
                                        مراجعه فرمایید.
                                    </p>
                                </section>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="toast-notification" class="toast-notification"></div>

        <script src="[https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js](https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js)"></script>
        <script>
            
            const body = document.body;
            const themeCheckbox = document.getElementById("theme-toggle-input");
            const ipv4Content = document.getElementById("ipv4-content");
            const ipv6Content = document.getElementById("ipv6-content");
            const linksFabBtn = document.getElementById("links-fab-btn");
            const linksPopupMenu = document.getElementById("links-popup-menu");
            const toastNotification = document.getElementById("toast-notification");
            const guidePopup = document.getElementById("guide-popup");
            const openGuideBtn = document.getElementById("open-guide-btn");
            const closeGuideBtn = document.getElementById("close-guide-btn");
            const cyberAutofillIPv4 = document.getElementById("cyber-autofill-ipv4");
            const cyberAutofillIPv6 = document.getElementById("cyber-autofill-ipv6");
            const switcher = document.querySelector(".stylish-switcher");
            const switcherBg = document.querySelector(".switcher-background");
            const switcherBtns = document.querySelectorAll(".switcher-btn");

            function setActiveSwitcher(protocol) {
                const isIPv4 = protocol === "ipv4";
                const activeButton = document.querySelector(`.switcher-btn[data-protocol="${protocol}"]`);

                if (activeButton && switcherBg) { 
                    switcherBg.style.width = `${activeButton.offsetWidth}px`;
                    switcherBg.style.left = `${activeButton.offsetLeft}px`;

                    const activeColor = isIPv4 ? "var(--neon-cyan)" : "var(--neon-magenta)";
                    const activeTextColor = body.classList.contains("dark-theme") ? "#000000" : "#FFFFFF";
                    switcherBg.style.backgroundColor = activeColor;

                    switcherBtns.forEach((btn) => {
                        btn.style.color = btn === activeButton ? activeTextColor : "var(--text-secondary)";
                    });
                }

                if (ipv4Content) ipv4Content.classList.toggle("hidden", !isIPv4);
                if (ipv6Content) ipv6Content.classList.toggle("hidden", isIPv4);
            }
            

            if (switcher) {
                switcher.addEventListener("click", (e) => {
                    if (e.target.classList.contains("switcher-btn")) {
                        setActiveSwitcher(e.target.dataset.protocol);
                    }
                });
            }

            function applyTheme(theme) {
                body.classList.remove("dark-theme", "light-theme");
                body.classList.add(theme);
                localStorage.setItem("theme", theme);

                if (themeCheckbox) {
                    themeCheckbox.checked = theme === "dark-theme";
                }
                
                const qrContainerIPv4El = document.getElementById("qrCodeContainerIPv4");
                if (qrContainerIPv4El && qrContainerIPv4El.innerHTML) {
                    const urlInputIPv4El = document.getElementById("generatedUrl-ipv4");
                    if (urlInputIPv4El && urlInputIPv4El.value) {
                        generateQRCode(urlInputIPv4El.value, "qrCodeContainerIPv4");
                    }
                }
                const qrContainerIPv6El = document.getElementById("qrCodeContainerIPv6");
                if (qrContainerIPv6El && qrContainerIPv6El.innerHTML) {
                     const urlInputIPv6El = document.getElementById("generatedUrl-ipv6");
                    if (urlInputIPv6El && urlInputIPv6El.value) {
                        generateQRCode(urlInputIPv6El.value, "qrCodeContainerIPv6");
                    }
                }

                if(ipv4Content) { 
                    const activeProtocol = ipv4Content.classList.contains("hidden") ? "ipv6" : "ipv4";
                    setTimeout(() => setActiveSwitcher(activeProtocol), 0);
                } else {
                    setTimeout(() => setActiveSwitcher("ipv4"), 0);
                }
            }

            if (themeCheckbox) {
                themeCheckbox.addEventListener("change", () => {
                    const newTheme = themeCheckbox.checked ? "dark-theme" : "light-theme";
                    applyTheme(newTheme);
                });
            }

            let toastTimeout;
            function showToast(message) {
                if (toastTimeout) clearTimeout(toastTimeout);
                if (toastNotification) {
                    toastNotification.textContent = message;
                    toastNotification.classList.add("show");
                    toastTimeout = setTimeout(() => {
                        toastNotification.classList.remove("show");
                    }, 3000);
                } else {
                }
            }

            function copyToClipboard(elementId, successMessage) {
                const copyTextEl = document.getElementById(elementId);
                if (!copyTextEl || !copyTextEl.value) {
                    showToast("مقداری برای کپی وجود ندارد.");
                    return;
                }


                copyTextEl.select();
                copyTextEl.setSelectionRange(0, 99999);

                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(copyTextEl.value)
                        .then(() => showToast(successMessage))
                        .catch(err => {
                            try {
                                document.execCommand("copy");
                                showToast(successMessage + " (حالت جایگزین)");
                            } catch (execErr) {
                                showToast("کپی با خطا مواجه شد.");
                   }
                        });
                } else {
                    try {
                        document.execCommand("copy");
                        showToast(successMessage + " (حالت جایگزین)");
                    } catch (err) {
                        showToast("کپی با خطا مواجه شد.");
                    }
                }
            }

            function copyRawLink(textToCopy, successMessage) {
                 if (!textToCopy) {
                    showToast("مقداری برای کپی وجود ندارد.");
                    return;
                }
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(textToCopy)
                        .then(() => showToast(successMessage))
                        .catch(err => {
                            fallbackCopyTextToClipboard(textToCopy, successMessage);
                        });
                } else {
                    fallbackCopyTextToClipboard(textToCopy, successMessage);
                }
            }

            function fallbackCopyTextToClipboard(text, successMessage) {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.top = "-9999px";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand("copy");
                    showToast(successMessage + " (حالت جایگزین)");
                } catch (err) {
                    showToast("کپی با خطا مواجه شد.");
                }
                document.body.removeChild(textArea);
            }


            function generateQRCode(data, containerId) {
                const qrCodeContainer = document.getElementById(containerId);
                if (!qrCodeContainer) return;
                qrCodeContainer.innerHTML = "";
                
                const isDarkTheme = body.classList.contains("dark-theme");
                const qrColorDark = isDarkTheme ? getComputedStyle(body).getPropertyValue('--text-primary').trim() : "#000000";
                const qrColorLight = isDarkTheme ? getComputedStyle(body).getPropertyValue('--container-bg').trim() : "#ffffff";

                new QRCode(qrCodeContainer, {
                    text: data,
                    width: qrCodeContainer.offsetWidth > 0 ? Math.min(200, qrCodeContainer.offsetWidth - 10) : 150,
                    height: qrCodeContainer.offsetWidth > 0 ? Math.min(200, qrCodeContainer.offsetWidth - 10) : 150,
                    colorDark: qrColorDark,
                    colorLight: qrColorLight,
                    correctLevel: QRCode.CorrectLevel.L 
                });
            }


            async function fetchRandomIPs() {
                try {
                    const response = await fetch(
                        "[https://raw.githubusercontent.com/ircfspace/endpoint/refs/heads/main/ip.json](https://raw.githubusercontent.com/ircfspace/endpoint/refs/heads/main/ip.json)"
                    );
                    if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
                    return await response.json();
                } catch (error) {
                    showToast("دریافت IP خودکار ممکن نبود. لطفاً به صورت دستی وارد کنید.");
                    return null;
                }
            }


            function toggleGuidePopup() {
                if (!guidePopup) return;
                const displayStyle = window.getComputedStyle(guidePopup).display;
                if (displayStyle === "flex") {
                    guidePopup.style.display = "none";
                    body.style.overflow = "";
                } else {
                    guidePopup.style.display = "flex";
                    body.style.overflow = "hidden";
                }
            }

            if (openGuideBtn) openGuideBtn.addEventListener("click", toggleGuidePopup);
            if (closeGuideBtn) closeGuideBtn.addEventListener("click", toggleGuidePopup);
            if (guidePopup)
                guidePopup.addEventListener("click", (e) => { 
                    if (e.target === guidePopup) {
                        toggleGuidePopup();
                    }
                });

            if (linksFabBtn) {
                linksFabBtn.addEventListener("click", (event) => {
                    event.stopPropagation();
                    if (linksPopupMenu) {
                        const isDisplayed = linksPopupMenu.style.display === "flex";
                        linksPopupMenu.style.display = isDisplayed ? "none" : "flex";
                    }
                });
            }

            document.addEventListener("click", (event) => {
                if (linksPopupMenu && linksPopupMenu.style.display === "flex") {
                    if (
                        !linksPopupMenu.contains(event.target) &&
                        event.target !== linksFabBtn &&
                        (!linksFabBtn || !linksFabBtn.contains(event.target)) 
        
                    ) {
                        linksPopupMenu.style.display = "none";
                    }
                }
            });

            async function getDetourUrl(formType) {
                const wowToggle = document.getElementById(`neo-wow-toggle-${formType}`);
                if (!wowToggle || !wowToggle.checked) return "";

                const wowSelect = document.getElementById(`wow-select-${formType}`);
                const wowNameInput = document.getElementById(`wow-name-${formType}`);
                if (!wowSelect || !wowNameInput) return "";

                const detourType = wowSelect.value;
                let detourUrl = "";

                const ipData = await fetchRandomIPs();
                if (!ipData) {
                    showToast("ساخت detour با شکست مواجه شد: دریافت لیست IP ممکن نبود.");
                    return null;
                }

                if (detourType === "ipv4") {
                    if (!ipData.ipv4 || ipData.ipv4.length === 0) {
                        showToast("ساخت detour با شکست مواجه شد: لیست IP نسخه 4 در دسترس نیست.");
                        return null;
                    }
                    const randomEndpoint = ipData.ipv4[Math.floor(Math.random() * ipData.ipv4.length)];
                    const [ip, port] = randomEndpoint.split(":");
                    const detourName = wowNameInput.value.trim() || (formType === "ipv4" ? "WoW IPv4" : "WoW IPv6 Detour");
                    detourUrl = `&&detour=warp://${ip}:${port}/?ifp=2-4&ifpm=m4#${encodeURIComponent(detourName)}`;
                } else {
                    if (!ipData.ipv6 || ipData.ipv6.length === 0) {
                        showToast("ساخت detour با شکست مواجه شد: لیست IP نسخه 6 در دسترس نیست.");
                        return null;
                    }
                    const ip = ipData.ipv6[Math.floor(Math.random() * ipData.ipv6.length)];
                    const detourName = wowNameInput.value.trim() || (formType === "ipv6" ? "WoW IPv6" : "WoW IPv4 Detour");
                    detourUrl = `&&detour=warp://[${ip}]/?ifp=2-4&ifpm=m4#${encodeURIComponent(detourName)}`;
                }
                return detourUrl;
            }

            const formIPv4 = document.getElementById("warpinatorFormIPv4");
            if (formIPv4) {
                formIPv4.addEventListener("submit", async function (e) {
                    e.preventDefault();
                    const wowToggleIPv4 = document.getElementById("neo-wow-toggle-ipv4");
                    let detourString = "";
                    if (wowToggleIPv4 && wowToggleIPv4.checked) {
                        detourString = await getDetourUrl("ipv4");
                        if (detourString === null) return;
                    }

                    const username = document.getElementById("username-ipv4").value.trim() || "𓄂ʷᵃʳᵖᵢₚᵥ₄𓆃";
                    const license = document.getElementById("license-ipv4").value.trim();
                    const params = `ifp=${document.getElementById("type1-ipv4").value}&ifps=${document.getElementById("type2-ipv4").value}&ifpd=${document.getElementById("type3-ipv4").value}&ifpm=${document.getElementById("type4-ipv4").value}`;
                    const ip = document.getElementById("ip-ipv4").value.trim() || "162.159.192.76";
                    const port = document.getElementById("port-ipv4").value.trim() || "878";
                    
                    if (!ip || !port) {
                        const currentCyberAutofillIPv4 = document.getElementById("cyber-autofill-ipv4");
                        if (!currentCyberAutofillIPv4 || !currentCyberAutofillIPv4.checked) {
                           showToast("لطفاً IP و پورت را وارد کنید یا گزینه پر کردن خودکار را فعال نمایید.");
                           return;
                        }
                    }

                    const endpoint = `${ip}:${port}`;
                    let url = license
                        ? `warp://${license}@${endpoint}/?${params}#${encodeURIComponent(username)}`
                        : `warp://${endpoint}/?${params}#${encodeURIComponent(username)}`;
                    url += detourString || "";
                    
                    const generatedUrlIPv4 = document.getElementById("generatedUrl-ipv4");
                    if (generatedUrlIPv4) generatedUrlIPv4.value = url;
                    const resultIPv4 = document.getElementById("result-ipv4");
                    if (resultIPv4) resultIPv4.style.display = "block";
                    generateQRCode(url, "qrCodeContainerIPv4");
                });
            }

            const formIPv6 = document.getElementById("warpinatorFormIPv6");
            if (formIPv6) {
                formIPv6.addEventListener("submit", async function (e) {
                    e.preventDefault();
                    const wowToggleIPv6 = document.getElementById("neo-wow-toggle-ipv6");
                    let detourString = "";
                    if (wowToggleIPv6 && wowToggleIPv6.checked) {
                        detourString = await getDetourUrl("ipv6");
                        if (detourString === null) return;
                    }

                    const username = document.getElementById("username-ipv6").value.trim() || "𓄂ʷᵃʳᵖᵢₚᵥ₆𓆃";
                    const license = document.getElementById("license-ipv6").value.trim();
                    const params = `ifp=${document.getElementById("type1-ipv6").value}&ifps=${document.getElementById("type2-ipv6").value}&ifpd=${document.getElementById("type3-ipv6").value}&ifpm=${document.getElementById("type4-ipv6").value}`;
                    const ipFieldIPv6 = document.getElementById("ip-ipv6");
                    const ip = ipFieldIPv6.value.trim();
                    
                    const currentCyberAutofillIPv6 = document.getElementById("cyber-autofill-ipv6");
                    if (!ip && (!currentCyberAutofillIPv6 || !currentCyberAutofillIPv6.checked)) {
                        showToast("لطفاً یک آدرس IPv6 وارد کنید یا گزینه پر کردن خودکار را فعال نمایید.");
                        return;
                    }
                     if (currentCyberAutofillIPv6 && currentCyberAutofillIPv6.checked && (!ip || ip === "در حال دریافت...")) {
                        showToast("لطفاً منتظر بمانید تا IP خودکار دریافت شود یا به صورت دستی وارد کنید.");
                        return;
                    }
        
                    const endpoint = `[${ip}]`;
                    
                    let url = license
                        ? `warp://${license}@${endpoint}/?${params}#${encodeURIComponent(username)}`
                        : `warp://${endpoint}/?${params}#${encodeURIComponent(username)}`;
                    url += detourString || "";
                    
                    const generatedUrlIPv6 = document.getElementById("generatedUrl-ipv6");
                    if (generatedUrlIPv6) generatedUrlIPv6.value = url;
                    const resultIPv6 = document.getElementById("result-ipv6");
                    if (resultIPv6) resultIPv6.style.display = "block";
                    generateQRCode(url, "qrCodeContainerIPv6");
                });
            }

            function toggleAutoFill(version) {
                const checkbox = document.getElementById(`cyber-autofill-ipv${version}`);
                const ipField = document.getElementById(`ip-ipv${version}`);
                const portField = version === 4 ? document.getElementById("port-ipv4") : null;

                if (!checkbox || !ipField) return;

                ipField.disabled = checkbox.checked;
                if (portField) portField.disabled = checkbox.checked;

                if (checkbox.checked) {
                    ipField.value = "در حال دریافت...";
                    if (portField) portField.value = ""; 

                    fetchRandomIPs().then((data) => {
                        if (!checkbox.checked) return;

                        if (data) {
                            if (version === 4 && data.ipv4 && data.ipv4.length > 0) {
                                const [ipVal, portVal] =
                                    data.ipv4[Math.floor(Math.random() * data.ipv4.length)].split(":");
                                ipField.value = ipVal;
                                if (portField) portField.value = portVal;
                            } else if (version === 6 && data.ipv6 && data.ipv6.length > 0) {
                                ipField.value = data.ipv6[Math.floor(Math.random() * data.ipv6.length)];
                            } else {
                                ipField.value = "خطا در دریافت";
                                if (portField) portField.value = "";
                                showToast(`دریافت IP خودکار IPv${version} ممکن نبود.`);
                            }
                        } else {
                            ipField.value = "خطا در دریافت";
                            if (portField) portField.value = "";
                        }
                    });
                } else {
                    if (ipField.value === "در حال دریافت..." || ipField.value === "خطا در دریافت") {
                         ipField.value = (version === 4) ? "162.159.192.76" : ""; 
                    }
                    if (portField) {
                        if (portField.value === "" || portField.value === "خطا در دریافت") {
                           if (version === 4) portField.value = "2408";
                        }
                    }
                }
            }


            if (cyberAutofillIPv4) cyberAutofillIPv4.addEventListener('change', () => toggleAutoFill(4));
            if (cyberAutofillIPv6) cyberAutofillIPv6.addEventListener('change', () => toggleAutoFill(6));

            ["ipv4", "ipv6"].forEach((formType) => {
                const wowToggle = document.getElementById(`neo-wow-toggle-${formType}`);
                const wowSelect = document.getElementById(`wow-select-${formType}`);
                const wowNameWrapper = document.getElementById(`wow-name-wrapper-${formType}`);
                const wowNameInput = document.getElementById(`wow-name-${formType}`);


                if (wowToggle) {
                    wowToggle.addEventListener("change", function () {
                        const isChecked = this.checked;
                        if (wowSelect) wowSelect.disabled = !isChecked;
                        if (wowNameWrapper) wowNameWrapper.classList.toggle("hidden", !isChecked);
                        if (wowNameInput) {
                             wowNameInput.placeholder = wowSelect && wowSelect.value === "ipv6" ? "WoW IPv6" : "WoW IPv4";
                        }
                    });
                }
                 if (wowSelect) { 
                    wowSelect.addEventListener("change", function() {
                        if (wowNameInput) wowNameInput.placeholder = this.value === "ipv6" ? "WoW IPv6" : "WoW IPv4";
                    });
                }
            });

            document.addEventListener("DOMContentLoaded", () => {
                const savedTheme = localStorage.getItem("theme") || "dark-theme";
                applyTheme(savedTheme); 

                const rawLinkIPv4TextEl = document.getElementById("rawLinkIPv4Text");
                if (rawLinkIPv4TextEl) 
                    rawLinkIPv4TextEl.textContent =
                        rawLinkIPv4TextEl.textContent.replace("[https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main](https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main)", "...");
                const rawLinkIPv6TextEl = document.getElementById("rawLinkIPv6Text");
                if (rawLinkIPv6TextEl)
                    rawLinkIPv6TextEl.textContent =
                        rawLinkIPv6TextEl.textContent.replace("[https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main](https://raw.githubusercontent.com/darknessm427/Sub/refs/heads/main)", "...");

                if (cyberAutofillIPv4) {
                    toggleAutoFill(4);
                } else { 
                    const ipField4 = document.getElementById('ip-ipv4');
                    const portField4 = document.getElementById('port-ipv4');
                    if (ipField4) ipField4.disabled = false;
                    if (portField4) portField4.disabled = false;
                }

                if (cyberAutofillIPv6) {
                    toggleAutoFill(6);
                } else {
                    const ipField6 = document.getElementById('ip-ipv6');
                    if (ipField6) ipField6.disabled = false;
                }
                
                ["ipv4", "ipv6"].forEach(formType => {
                    const wowSelect = document.getElementById(`wow-select-${formType}`);
                    const wowNameInput = document.getElementById(`wow-name-${formType}`);
                    if (wowSelect && wowNameInput) {
                        wowNameInput.placeholder = wowSelect.value === "ipv6" ? "WoW IPv6" : "WoW IPv4";
                    }
                });

            });
        </script>
    </body>
</html>
